{"version":3,"sources":["webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/@vimeo/player/dist/player.es.js","webpack:///./src/article/hero.js","webpack:///./src/article/heading.js","webpack:///./src/article/paragraph.js","webpack:///./src/article/whatWeDid.js","webpack:///./src/article/utils/getRelatedArticles.js","webpack:///./src/article/relatedArticles.js","webpack:///./src/article/utils/articleTransitions.js","webpack:///./src/article/index.js","webpack:///./src/components/Vimeo.js"],"names":["apply","Function","prototype","Timeout","id","clearFn","this","_id","_clearFn","exports","setTimeout","call","scope","arguments","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","setImmediate","self","global","clearImmediate","undefined","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","attachTo","Object","getPrototypeOf","toString","process","handle","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","event","data","port2","createElement","documentElement","script","onreadystatechange","removeChild","appendChild","Math","random","source","indexOf","slice","length","addEventListener","attachEvent","callback","args","Array","i","task","run","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","isNode","getMethodName","prop","type","toLowerCase","concat","substr","toUpperCase","isDomElement","element","Boolean","nodeType","ownerDocument","defaultView","isInteger","value","isNaN","parseFloat","isFinite","floor","isVimeoUrl","url","test","getVimeoUrl","oEmbedParameters","idOrUrl","Error","replace","arrayIndexOfSupport","postMessageSupport","window","commonjsGlobal","WeakMap","hasOwnProperty","object","name","genId","checkInstance","x","methodName","isObject","prefix","rand","substring","entry","npo_src","fn","module","createCommonjsModule","context","definition","builtInProp","cycle","scheduling_queue","ToString","timer","obj","val","config","err","schedule","add","drain","isThenable","o","_then","o_type","then","notify","chain","notifyIsolated","state","success","failure","cb","ret","reject","msg","promise","resolve","triggered","def","def_wrapper","MakeDefWrapper","iteratePromises","arr","resolver","rejecter","idx","MakeDef","Promise","executor","__NPO__","constructor","push","first","last","Item","next","f","PromisePrototype","len","msgs","count","callbackMap","storeCallback","player","playerCallbacks","get","set","getCallbacks","removeCallback","index","splice","swapCallbacks","oldElement","newElement","getOEmbedParameters","defaults","reduce","params","param","getAttribute","createEmbed","_ref","querySelector","div","innerHTML","firstChild","setAttribute","getOEmbedData","videoUrl","encodeURIComponent","xhr","XDomainRequest","XMLHttpRequest","open","onload","status","json","JSON","parse","responseText","domain_status_code","error","onerror","send","parseMessageData","console","warn","method","contentWindow","message","ieVersion","navigator","userAgent","stringify","origin","processData","callbacks","forEach","shift","shiftCallbacks","e","playerMap","readyMap","Player","_this","options","jQuery","getElementById","win","nodeName","iframe","has","readyPromise","onMessage","isReadyEvent","isPingResponse","_originalElement","protoProps","staticProps","_this2","ready","_this3","_this4","eventName","callMethod","time","language","kind","_this5","removeAttribute","parentNode","autopause","color","currentTime","loop","muted","playbackRate","volume","parent","elements","querySelectorAll","handleError","initializeEmbeds","VimeoPlayerResizeEmbeds_","iframes","parentElement","style","paddingBottom","bottom","resizeEmbeds","Hero","heroImgLoaded","heroVideoLoaded","heroEl","React","createRef","setState","videoLoaded","componentDidMount","current","backgroundColor","heroImage","optimizedimages","colorPalette","render","vimeoUrl","heroBannerVideo","vimeoSplit","split","className","fluid","imageFile","childImageSharp","onLoad","bind","Vimeo","vimeoOptions","background","position","videoPlayingCallback","Component","Heading","title","text","Paragraph","WhatWeDid","disciplines","map","discipline","to","categories","category","externalLink","href","rel","getMoreRelatedArticles","collectRelated","currArticle","allArticles","tag","thisTag","projectTags","firstArticleId","j","k","sort","a","b","related","relatedProjects","getRelatedArticles","craft","entries","articleTransitionEl","useRef","article","moduleImg","image","imgSharp","direction","exit","zIndex","trigger","tileDimensions","getBoundingClientRect","heroDimensions","scale","width","imgSrc","src","copyTileStyle","backgroundImage","top","y","left","height","opacity","TweenLite","classList","growToHero","ease","onComplete","scrollTo","filter","relatedArticlesTransition","delay","node","articleEl","heroImg","styles","newTransitionEl","complete","newArticleFadeIn","slug","Article","seo","seomatic","projectName","heroTitle","modules","moduleText","moduleImage","moduleVimeoAmbientBackground","moduleVimeoStory","ambient","soundIcon","soundButtonColour","query","screenSize","checkWindow","w","innerWidth","h","innerHeight","VimeoEl","loading","el","class","autopuase","clickPaused","scrollPaused","scrollPlay","muteBtn","soundIconColor","init","componentWillUnmount","removeEventListener","scrollEvent","resizeEvent","video","destroy","VimeoAPI","onResize","on","setVolume","scrollPause","checkIfVideoInView","scrollPlayPauseVideo","videoReadyCallback","setVideoPositionDetails","onScroll","requestAnimationFrame","screenTop","pageYOffset","screenBottom","pause","catch","log","play","videoBox","videoTop","videoBottom","videoTopQuater","videoBottomQuater","muteClicked","iconColor","onClick"],"mappings":"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","file":"component---src-article-index-js-9f44adaa84fc1e6b8399.js","sourcesContent":["var scope = typeof global !== \"undefined\" && global || typeof self !== \"undefined\" && self || window;\nvar apply = Function.prototype.apply; // DOM APIs, for completeness\n\nexports.setTimeout = function () {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\n\nexports.setInterval = function () {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\n\nexports.clearTimeout = exports.clearInterval = function (timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\n\nTimeout.prototype.unref = Timeout.prototype.ref = function () {};\n\nTimeout.prototype.close = function () {\n  this._clearFn.call(scope, this._id);\n}; // Does not start the time, just sets up the members needed.\n\n\nexports.enroll = function (item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function (item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function (item) {\n  clearTimeout(item._idleTimeoutId);\n  var msecs = item._idleTimeout;\n\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout) item._onTimeout();\n    }, msecs);\n  }\n}; // setimmediate attaches itself to the global object\n\n\nrequire(\"setimmediate\"); // On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\n\n\nexports.setImmediate = typeof self !== \"undefined\" && self.setImmediate || typeof global !== \"undefined\" && global.setImmediate || this && this.setImmediate;\nexports.clearImmediate = typeof self !== \"undefined\" && self.clearImmediate || typeof global !== \"undefined\" && global.clearImmediate || this && this.clearImmediate;","require(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\n(function (global, undefined) {\n  \"use strict\";\n\n  if (global.setImmediate) {\n    return;\n  }\n\n  var nextHandle = 1; // Spec says greater than zero\n\n  var tasksByHandle = {};\n  var currentlyRunningATask = false;\n  var doc = global.document;\n  var registerImmediate;\n\n  function setImmediate(callback) {\n    // Callback can either be a function or a string\n    if (typeof callback !== \"function\") {\n      callback = new Function(\"\" + callback);\n    } // Copy function arguments\n\n\n    var args = new Array(arguments.length - 1);\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 1];\n    } // Store and register the task\n\n\n    var task = {\n      callback: callback,\n      args: args\n    };\n    tasksByHandle[nextHandle] = task;\n    registerImmediate(nextHandle);\n    return nextHandle++;\n  }\n\n  function clearImmediate(handle) {\n    delete tasksByHandle[handle];\n  }\n\n  function run(task) {\n    var callback = task.callback;\n    var args = task.args;\n\n    switch (args.length) {\n      case 0:\n        callback();\n        break;\n\n      case 1:\n        callback(args[0]);\n        break;\n\n      case 2:\n        callback(args[0], args[1]);\n        break;\n\n      case 3:\n        callback(args[0], args[1], args[2]);\n        break;\n\n      default:\n        callback.apply(undefined, args);\n        break;\n    }\n  }\n\n  function runIfPresent(handle) {\n    // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n    // So if we're currently running a task, we'll need to delay this invocation.\n    if (currentlyRunningATask) {\n      // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n      // \"too much recursion\" error.\n      setTimeout(runIfPresent, 0, handle);\n    } else {\n      var task = tasksByHandle[handle];\n\n      if (task) {\n        currentlyRunningATask = true;\n\n        try {\n          run(task);\n        } finally {\n          clearImmediate(handle);\n          currentlyRunningATask = false;\n        }\n      }\n    }\n  }\n\n  function installNextTickImplementation() {\n    registerImmediate = function registerImmediate(handle) {\n      process.nextTick(function () {\n        runIfPresent(handle);\n      });\n    };\n  }\n\n  function canUsePostMessage() {\n    // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n    // where `global.postMessage` means something completely different and can't be used for this purpose.\n    if (global.postMessage && !global.importScripts) {\n      var postMessageIsAsynchronous = true;\n      var oldOnMessage = global.onmessage;\n\n      global.onmessage = function () {\n        postMessageIsAsynchronous = false;\n      };\n\n      global.postMessage(\"\", \"*\");\n      global.onmessage = oldOnMessage;\n      return postMessageIsAsynchronous;\n    }\n  }\n\n  function installPostMessageImplementation() {\n    // Installs an event handler on `global` for the `message` event: see\n    // * https://developer.mozilla.org/en/DOM/window.postMessage\n    // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n    var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n\n    var onGlobalMessage = function onGlobalMessage(event) {\n      if (event.source === global && typeof event.data === \"string\" && event.data.indexOf(messagePrefix) === 0) {\n        runIfPresent(+event.data.slice(messagePrefix.length));\n      }\n    };\n\n    if (global.addEventListener) {\n      global.addEventListener(\"message\", onGlobalMessage, false);\n    } else {\n      global.attachEvent(\"onmessage\", onGlobalMessage);\n    }\n\n    registerImmediate = function registerImmediate(handle) {\n      global.postMessage(messagePrefix + handle, \"*\");\n    };\n  }\n\n  function installMessageChannelImplementation() {\n    var channel = new MessageChannel();\n\n    channel.port1.onmessage = function (event) {\n      var handle = event.data;\n      runIfPresent(handle);\n    };\n\n    registerImmediate = function registerImmediate(handle) {\n      channel.port2.postMessage(handle);\n    };\n  }\n\n  function installReadyStateChangeImplementation() {\n    var html = doc.documentElement;\n\n    registerImmediate = function registerImmediate(handle) {\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var script = doc.createElement(\"script\");\n\n      script.onreadystatechange = function () {\n        runIfPresent(handle);\n        script.onreadystatechange = null;\n        html.removeChild(script);\n        script = null;\n      };\n\n      html.appendChild(script);\n    };\n  }\n\n  function installSetTimeoutImplementation() {\n    registerImmediate = function registerImmediate(handle) {\n      setTimeout(runIfPresent, 0, handle);\n    };\n  } // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n\n\n  var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n  attachTo = attachTo && attachTo.setTimeout ? attachTo : global; // Don't get fooled by e.g. browserify environments.\n\n  if ({}.toString.call(global.process) === \"[object process]\") {\n    // For Node.js before 0.9\n    installNextTickImplementation();\n  } else if (canUsePostMessage()) {\n    // For non-IE10 modern browsers\n    installPostMessageImplementation();\n  } else if (global.MessageChannel) {\n    // For web workers, where supported\n    installMessageChannelImplementation();\n  } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n    // For IE 6–8\n    installReadyStateChangeImplementation();\n  } else {\n    // For older browsers\n    installSetTimeoutImplementation();\n  }\n\n  attachTo.setImmediate = setImmediate;\n  attachTo.clearImmediate = clearImmediate;\n})(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self);","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.array.reduce\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.weak-map\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.define-property\";\n\n/*! @vimeo/player v2.10.0 | (c) 2019 Vimeo | MIT License | https://github.com/vimeo/player.js */\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n/**\n * @module lib/functions\n */\n\n/**\n * Check to see this is a node environment.\n * @type {Boolean}\n */\n\n/* global global */\n\n\nvar isNode = typeof global !== 'undefined' && {}.toString.call(global) === '[object global]';\n/**\n * Get the name of the method for a given getter or setter.\n *\n * @param {string} prop The name of the property.\n * @param {string} type Either “get” or “set”.\n * @return {string}\n */\n\nfunction getMethodName(prop, type) {\n  if (prop.indexOf(type.toLowerCase()) === 0) {\n    return prop;\n  }\n\n  return \"\".concat(type.toLowerCase()).concat(prop.substr(0, 1).toUpperCase()).concat(prop.substr(1));\n}\n/**\n * Check to see if the object is a DOM Element.\n *\n * @param {*} element The object to check.\n * @return {boolean}\n */\n\n\nfunction isDomElement(element) {\n  return Boolean(element && element.nodeType === 1 && 'nodeName' in element && element.ownerDocument && element.ownerDocument.defaultView);\n}\n/**\n * Check to see whether the value is a number.\n *\n * @see http://dl.dropboxusercontent.com/u/35146/js/tests/isNumber.html\n * @param {*} value The value to check.\n * @param {boolean} integer Check if the value is an integer.\n * @return {boolean}\n */\n\n\nfunction isInteger(value) {\n  // eslint-disable-next-line eqeqeq\n  return !isNaN(parseFloat(value)) && isFinite(value) && Math.floor(value) == value;\n}\n/**\n * Check to see if the URL is a Vimeo url.\n *\n * @param {string} url The url string.\n * @return {boolean}\n */\n\n\nfunction isVimeoUrl(url) {\n  return /^(https?:)?\\/\\/((player|www)\\.)?vimeo\\.com(?=$|\\/)/.test(url);\n}\n/**\n * Get the Vimeo URL from an element.\n * The element must have either a data-vimeo-id or data-vimeo-url attribute.\n *\n * @param {object} oEmbedParameters The oEmbed parameters.\n * @return {string}\n */\n\n\nfunction getVimeoUrl() {\n  var oEmbedParameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var id = oEmbedParameters.id;\n  var url = oEmbedParameters.url;\n  var idOrUrl = id || url;\n\n  if (!idOrUrl) {\n    throw new Error('An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.');\n  }\n\n  if (isInteger(idOrUrl)) {\n    return \"https://vimeo.com/\".concat(idOrUrl);\n  }\n\n  if (isVimeoUrl(idOrUrl)) {\n    return idOrUrl.replace('http:', 'https:');\n  }\n\n  if (id) {\n    throw new TypeError(\"\\u201C\".concat(id, \"\\u201D is not a valid video id.\"));\n  }\n\n  throw new TypeError(\"\\u201C\".concat(idOrUrl, \"\\u201D is not a vimeo.com url.\"));\n}\n\nvar arrayIndexOfSupport = typeof Array.prototype.indexOf !== 'undefined';\nvar postMessageSupport = typeof window !== 'undefined' && typeof window.postMessage !== 'undefined';\n\nif (!isNode && (!arrayIndexOfSupport || !postMessageSupport)) {\n  throw new Error('Sorry, the Vimeo Player API is not available in this browser.');\n}\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n/*!\n * weakmap-polyfill v2.0.0 - ECMAScript6 WeakMap polyfill\n * https://github.com/polygonplanet/weakmap-polyfill\n * Copyright (c) 2015-2016 polygon planet <polygon.planet.aqua@gmail.com>\n * @license MIT\n */\n\n\n(function (self) {\n  if (self.WeakMap) {\n    return;\n  }\n\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  var defineProperty = function defineProperty(object, name, value) {\n    if (Object.defineProperty) {\n      Object.defineProperty(object, name, {\n        configurable: true,\n        writable: true,\n        value: value\n      });\n    } else {\n      object[name] = value;\n    }\n  };\n\n  self.WeakMap = function () {\n    // ECMA-262 23.3 WeakMap Objects\n    function WeakMap() {\n      if (this === void 0) {\n        throw new TypeError(\"Constructor WeakMap requires 'new'\");\n      }\n\n      defineProperty(this, '_id', genId('_WeakMap')); // ECMA-262 23.3.1.1 WeakMap([iterable])\n\n      if (arguments.length > 0) {\n        // Currently, WeakMap `iterable` argument is not supported\n        throw new TypeError('WeakMap iterable is not supported');\n      }\n    } // ECMA-262 23.3.3.2 WeakMap.prototype.delete(key)\n\n\n    defineProperty(WeakMap.prototype, 'delete', function (key) {\n      checkInstance(this, 'delete');\n\n      if (!isObject(key)) {\n        return false;\n      }\n\n      var entry = key[this._id];\n\n      if (entry && entry[0] === key) {\n        delete key[this._id];\n        return true;\n      }\n\n      return false;\n    }); // ECMA-262 23.3.3.3 WeakMap.prototype.get(key)\n\n    defineProperty(WeakMap.prototype, 'get', function (key) {\n      checkInstance(this, 'get');\n\n      if (!isObject(key)) {\n        return void 0;\n      }\n\n      var entry = key[this._id];\n\n      if (entry && entry[0] === key) {\n        return entry[1];\n      }\n\n      return void 0;\n    }); // ECMA-262 23.3.3.4 WeakMap.prototype.has(key)\n\n    defineProperty(WeakMap.prototype, 'has', function (key) {\n      checkInstance(this, 'has');\n\n      if (!isObject(key)) {\n        return false;\n      }\n\n      var entry = key[this._id];\n\n      if (entry && entry[0] === key) {\n        return true;\n      }\n\n      return false;\n    }); // ECMA-262 23.3.3.5 WeakMap.prototype.set(key, value)\n\n    defineProperty(WeakMap.prototype, 'set', function (key, value) {\n      checkInstance(this, 'set');\n\n      if (!isObject(key)) {\n        throw new TypeError('Invalid value used as weak map key');\n      }\n\n      var entry = key[this._id];\n\n      if (entry && entry[0] === key) {\n        entry[1] = value;\n        return this;\n      }\n\n      defineProperty(key, this._id, [key, value]);\n      return this;\n    });\n\n    function checkInstance(x, methodName) {\n      if (!isObject(x) || !hasOwnProperty.call(x, '_id')) {\n        throw new TypeError(methodName + ' method called on incompatible receiver ' + typeof x);\n      }\n    }\n\n    function genId(prefix) {\n      return prefix + '_' + rand() + '.' + rand();\n    }\n\n    function rand() {\n      return Math.random().toString().substring(2);\n    }\n\n    defineProperty(WeakMap, '_polyfill', true);\n    return WeakMap;\n  }();\n\n  function isObject(x) {\n    return Object(x) === x;\n  }\n})(typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : commonjsGlobal);\n\nvar npo_src = createCommonjsModule(function (module) {\n  /*! Native Promise Only\n      v0.8.1 (c) Kyle Simpson\n      MIT License: http://getify.mit-license.org\n  */\n  (function UMD(name, context, definition) {\n    // special form of UMD for polyfilling across evironments\n    context[name] = context[name] || definition();\n\n    if (module.exports) {\n      module.exports = context[name];\n    }\n  })(\"Promise\", typeof commonjsGlobal != \"undefined\" ? commonjsGlobal : commonjsGlobal, function DEF() {\n    var builtInProp,\n        cycle,\n        scheduling_queue,\n        ToString = Object.prototype.toString,\n        timer = typeof setImmediate != \"undefined\" ? function timer(fn) {\n      return setImmediate(fn);\n    } : setTimeout; // dammit, IE8.\n\n    try {\n      Object.defineProperty({}, \"x\", {});\n\n      builtInProp = function builtInProp(obj, name, val, config) {\n        return Object.defineProperty(obj, name, {\n          value: val,\n          writable: true,\n          configurable: config !== false\n        });\n      };\n    } catch (err) {\n      builtInProp = function builtInProp(obj, name, val) {\n        obj[name] = val;\n        return obj;\n      };\n    } // Note: using a queue instead of array for efficiency\n\n\n    scheduling_queue = function Queue() {\n      var first, last, item;\n\n      function Item(fn, self) {\n        this.fn = fn;\n        this.self = self;\n        this.next = void 0;\n      }\n\n      return {\n        add: function add(fn, self) {\n          item = new Item(fn, self);\n\n          if (last) {\n            last.next = item;\n          } else {\n            first = item;\n          }\n\n          last = item;\n          item = void 0;\n        },\n        drain: function drain() {\n          var f = first;\n          first = last = cycle = void 0;\n\n          while (f) {\n            f.fn.call(f.self);\n            f = f.next;\n          }\n        }\n      };\n    }();\n\n    function schedule(fn, self) {\n      scheduling_queue.add(fn, self);\n\n      if (!cycle) {\n        cycle = timer(scheduling_queue.drain);\n      }\n    } // promise duck typing\n\n\n    function isThenable(o) {\n      var _then,\n          o_type = typeof o;\n\n      if (o != null && (o_type == \"object\" || o_type == \"function\")) {\n        _then = o.then;\n      }\n\n      return typeof _then == \"function\" ? _then : false;\n    }\n\n    function notify() {\n      for (var i = 0; i < this.chain.length; i++) {\n        notifyIsolated(this, this.state === 1 ? this.chain[i].success : this.chain[i].failure, this.chain[i]);\n      }\n\n      this.chain.length = 0;\n    } // NOTE: This is a separate function to isolate\n    // the `try..catch` so that other code can be\n    // optimized better\n\n\n    function notifyIsolated(self, cb, chain) {\n      var ret, _then;\n\n      try {\n        if (cb === false) {\n          chain.reject(self.msg);\n        } else {\n          if (cb === true) {\n            ret = self.msg;\n          } else {\n            ret = cb.call(void 0, self.msg);\n          }\n\n          if (ret === chain.promise) {\n            chain.reject(TypeError(\"Promise-chain cycle\"));\n          } else if (_then = isThenable(ret)) {\n            _then.call(ret, chain.resolve, chain.reject);\n          } else {\n            chain.resolve(ret);\n          }\n        }\n      } catch (err) {\n        chain.reject(err);\n      }\n    }\n\n    function resolve(msg) {\n      var _then,\n          self = this; // already triggered?\n\n\n      if (self.triggered) {\n        return;\n      }\n\n      self.triggered = true; // unwrap\n\n      if (self.def) {\n        self = self.def;\n      }\n\n      try {\n        if (_then = isThenable(msg)) {\n          schedule(function () {\n            var def_wrapper = new MakeDefWrapper(self);\n\n            try {\n              _then.call(msg, function $resolve$() {\n                resolve.apply(def_wrapper, arguments);\n              }, function $reject$() {\n                reject.apply(def_wrapper, arguments);\n              });\n            } catch (err) {\n              reject.call(def_wrapper, err);\n            }\n          });\n        } else {\n          self.msg = msg;\n          self.state = 1;\n\n          if (self.chain.length > 0) {\n            schedule(notify, self);\n          }\n        }\n      } catch (err) {\n        reject.call(new MakeDefWrapper(self), err);\n      }\n    }\n\n    function reject(msg) {\n      var self = this; // already triggered?\n\n      if (self.triggered) {\n        return;\n      }\n\n      self.triggered = true; // unwrap\n\n      if (self.def) {\n        self = self.def;\n      }\n\n      self.msg = msg;\n      self.state = 2;\n\n      if (self.chain.length > 0) {\n        schedule(notify, self);\n      }\n    }\n\n    function iteratePromises(Constructor, arr, resolver, rejecter) {\n      for (var idx = 0; idx < arr.length; idx++) {\n        (function IIFE(idx) {\n          Constructor.resolve(arr[idx]).then(function $resolver$(msg) {\n            resolver(idx, msg);\n          }, rejecter);\n        })(idx);\n      }\n    }\n\n    function MakeDefWrapper(self) {\n      this.def = self;\n      this.triggered = false;\n    }\n\n    function MakeDef(self) {\n      this.promise = self;\n      this.state = 0;\n      this.triggered = false;\n      this.chain = [];\n      this.msg = void 0;\n    }\n\n    function Promise(executor) {\n      if (typeof executor != \"function\") {\n        throw TypeError(\"Not a function\");\n      }\n\n      if (this.__NPO__ !== 0) {\n        throw TypeError(\"Not a promise\");\n      } // instance shadowing the inherited \"brand\"\n      // to signal an already \"initialized\" promise\n\n\n      this.__NPO__ = 1;\n      var def = new MakeDef(this);\n\n      this[\"then\"] = function then(success, failure) {\n        var o = {\n          success: typeof success == \"function\" ? success : true,\n          failure: typeof failure == \"function\" ? failure : false\n        }; // Note: `then(..)` itself can be borrowed to be used against\n        // a different promise constructor for making the chained promise,\n        // by substituting a different `this` binding.\n\n        o.promise = new this.constructor(function extractChain(resolve, reject) {\n          if (typeof resolve != \"function\" || typeof reject != \"function\") {\n            throw TypeError(\"Not a function\");\n          }\n\n          o.resolve = resolve;\n          o.reject = reject;\n        });\n        def.chain.push(o);\n\n        if (def.state !== 0) {\n          schedule(notify, def);\n        }\n\n        return o.promise;\n      };\n\n      this[\"catch\"] = function $catch$(failure) {\n        return this.then(void 0, failure);\n      };\n\n      try {\n        executor.call(void 0, function publicResolve(msg) {\n          resolve.call(def, msg);\n        }, function publicReject(msg) {\n          reject.call(def, msg);\n        });\n      } catch (err) {\n        reject.call(def, err);\n      }\n    }\n\n    var PromisePrototype = builtInProp({}, \"constructor\", Promise,\n    /*configurable=*/\n    false); // Note: Android 4 cannot use `Object.defineProperty(..)` here\n\n    Promise.prototype = PromisePrototype; // built-in \"brand\" to signal an \"uninitialized\" promise\n\n    builtInProp(PromisePrototype, \"__NPO__\", 0,\n    /*configurable=*/\n    false);\n    builtInProp(Promise, \"resolve\", function Promise$resolve(msg) {\n      var Constructor = this; // spec mandated checks\n      // note: best \"isPromise\" check that's practical for now\n\n      if (msg && typeof msg == \"object\" && msg.__NPO__ === 1) {\n        return msg;\n      }\n\n      return new Constructor(function executor(resolve, reject) {\n        if (typeof resolve != \"function\" || typeof reject != \"function\") {\n          throw TypeError(\"Not a function\");\n        }\n\n        resolve(msg);\n      });\n    });\n    builtInProp(Promise, \"reject\", function Promise$reject(msg) {\n      return new this(function executor(resolve, reject) {\n        if (typeof resolve != \"function\" || typeof reject != \"function\") {\n          throw TypeError(\"Not a function\");\n        }\n\n        reject(msg);\n      });\n    });\n    builtInProp(Promise, \"all\", function Promise$all(arr) {\n      var Constructor = this; // spec mandated checks\n\n      if (ToString.call(arr) != \"[object Array]\") {\n        return Constructor.reject(TypeError(\"Not an array\"));\n      }\n\n      if (arr.length === 0) {\n        return Constructor.resolve([]);\n      }\n\n      return new Constructor(function executor(resolve, reject) {\n        if (typeof resolve != \"function\" || typeof reject != \"function\") {\n          throw TypeError(\"Not a function\");\n        }\n\n        var len = arr.length,\n            msgs = Array(len),\n            count = 0;\n        iteratePromises(Constructor, arr, function resolver(idx, msg) {\n          msgs[idx] = msg;\n\n          if (++count === len) {\n            resolve(msgs);\n          }\n        }, reject);\n      });\n    });\n    builtInProp(Promise, \"race\", function Promise$race(arr) {\n      var Constructor = this; // spec mandated checks\n\n      if (ToString.call(arr) != \"[object Array]\") {\n        return Constructor.reject(TypeError(\"Not an array\"));\n      }\n\n      return new Constructor(function executor(resolve, reject) {\n        if (typeof resolve != \"function\" || typeof reject != \"function\") {\n          throw TypeError(\"Not a function\");\n        }\n\n        iteratePromises(Constructor, arr, function resolver(idx, msg) {\n          resolve(msg);\n        }, reject);\n      });\n    });\n    return Promise;\n  });\n});\n/**\n * @module lib/callbacks\n */\n\nvar callbackMap = new WeakMap();\n/**\n * Store a callback for a method or event for a player.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name.\n * @param {(function(this:Player, *): void|{resolve: function, reject: function})} callback\n *        The callback to call or an object with resolve and reject functions for a promise.\n * @return {void}\n */\n\nfunction storeCallback(player, name, callback) {\n  var playerCallbacks = callbackMap.get(player.element) || {};\n\n  if (!(name in playerCallbacks)) {\n    playerCallbacks[name] = [];\n  }\n\n  playerCallbacks[name].push(callback);\n  callbackMap.set(player.element, playerCallbacks);\n}\n/**\n * Get the callbacks for a player and event or method.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name\n * @return {function[]}\n */\n\n\nfunction getCallbacks(player, name) {\n  var playerCallbacks = callbackMap.get(player.element) || {};\n  return playerCallbacks[name] || [];\n}\n/**\n * Remove a stored callback for a method or event for a player.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name\n * @param {function} [callback] The specific callback to remove.\n * @return {boolean} Was this the last callback?\n */\n\n\nfunction removeCallback(player, name, callback) {\n  var playerCallbacks = callbackMap.get(player.element) || {};\n\n  if (!playerCallbacks[name]) {\n    return true;\n  } // If no callback is passed, remove all callbacks for the event\n\n\n  if (!callback) {\n    playerCallbacks[name] = [];\n    callbackMap.set(player.element, playerCallbacks);\n    return true;\n  }\n\n  var index = playerCallbacks[name].indexOf(callback);\n\n  if (index !== -1) {\n    playerCallbacks[name].splice(index, 1);\n  }\n\n  callbackMap.set(player.element, playerCallbacks);\n  return playerCallbacks[name] && playerCallbacks[name].length === 0;\n}\n/**\n * Return the first stored callback for a player and event or method.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name.\n * @return {function} The callback, or false if there were none\n */\n\n\nfunction shiftCallbacks(player, name) {\n  var playerCallbacks = getCallbacks(player, name);\n\n  if (playerCallbacks.length < 1) {\n    return false;\n  }\n\n  var callback = playerCallbacks.shift();\n  removeCallback(player, name, callback);\n  return callback;\n}\n/**\n * Move callbacks associated with an element to another element.\n *\n * @param {HTMLElement} oldElement The old element.\n * @param {HTMLElement} newElement The new element.\n * @return {void}\n */\n\n\nfunction swapCallbacks(oldElement, newElement) {\n  var playerCallbacks = callbackMap.get(oldElement);\n  callbackMap.set(newElement, playerCallbacks);\n  callbackMap[\"delete\"](oldElement);\n}\n/**\n * @module lib/embed\n */\n\n\nvar oEmbedParameters = ['autopause', 'autoplay', 'background', 'byline', 'color', 'controls', 'dnt', 'height', 'id', 'loop', 'maxheight', 'maxwidth', 'muted', 'playsinline', 'portrait', 'responsive', 'speed', 'texttrack', 'title', 'transparent', 'url', 'width'];\n/**\n * Get the 'data-vimeo'-prefixed attributes from an element as an object.\n *\n * @param {HTMLElement} element The element.\n * @param {Object} [defaults={}] The default values to use.\n * @return {Object<string, string>}\n */\n\nfunction getOEmbedParameters(element) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return oEmbedParameters.reduce(function (params, param) {\n    var value = element.getAttribute(\"data-vimeo-\".concat(param));\n\n    if (value || value === '') {\n      params[param] = value === '' ? 1 : value;\n    }\n\n    return params;\n  }, defaults);\n}\n/**\n * Create an embed from oEmbed data inside an element.\n *\n * @param {object} data The oEmbed data.\n * @param {HTMLElement} element The element to put the iframe in.\n * @return {HTMLIFrameElement} The iframe embed.\n */\n\n\nfunction createEmbed(_ref, element) {\n  var html = _ref.html;\n\n  if (!element) {\n    throw new TypeError('An element must be provided');\n  }\n\n  if (element.getAttribute('data-vimeo-initialized') !== null) {\n    return element.querySelector('iframe');\n  }\n\n  var div = document.createElement('div');\n  div.innerHTML = html;\n  element.appendChild(div.firstChild);\n  element.setAttribute('data-vimeo-initialized', 'true');\n  return element.querySelector('iframe');\n}\n/**\n * Make an oEmbed call for the specified URL.\n *\n * @param {string} videoUrl The vimeo.com url for the video.\n * @param {Object} [params] Parameters to pass to oEmbed.\n * @param {HTMLElement} element The element.\n * @return {Promise}\n */\n\n\nfunction getOEmbedData(videoUrl) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var element = arguments.length > 2 ? arguments[2] : undefined;\n  return new Promise(function (resolve, reject) {\n    if (!isVimeoUrl(videoUrl)) {\n      throw new TypeError(\"\\u201C\".concat(videoUrl, \"\\u201D is not a vimeo.com url.\"));\n    }\n\n    var url = \"https://vimeo.com/api/oembed.json?url=\".concat(encodeURIComponent(videoUrl));\n\n    for (var param in params) {\n      if (params.hasOwnProperty(param)) {\n        url += \"&\".concat(param, \"=\").concat(encodeURIComponent(params[param]));\n      }\n    }\n\n    var xhr = 'XDomainRequest' in window ? new XDomainRequest() : new XMLHttpRequest();\n    xhr.open('GET', url, true);\n\n    xhr.onload = function () {\n      if (xhr.status === 404) {\n        reject(new Error(\"\\u201C\".concat(videoUrl, \"\\u201D was not found.\")));\n        return;\n      }\n\n      if (xhr.status === 403) {\n        reject(new Error(\"\\u201C\".concat(videoUrl, \"\\u201D is not embeddable.\")));\n        return;\n      }\n\n      try {\n        var json = JSON.parse(xhr.responseText); // Check api response for 403 on oembed\n\n        if (json.domain_status_code === 403) {\n          // We still want to create the embed to give users visual feedback\n          createEmbed(json, element);\n          reject(new Error(\"\\u201C\".concat(videoUrl, \"\\u201D is not embeddable.\")));\n          return;\n        }\n\n        resolve(json);\n      } catch (error) {\n        reject(error);\n      }\n    };\n\n    xhr.onerror = function () {\n      var status = xhr.status ? \" (\".concat(xhr.status, \")\") : '';\n      reject(new Error(\"There was an error fetching the embed code from Vimeo\".concat(status, \".\")));\n    };\n\n    xhr.send();\n  });\n}\n/**\n * Initialize all embeds within a specific element\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\n\n\nfunction initializeEmbeds() {\n  var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  var elements = [].slice.call(parent.querySelectorAll('[data-vimeo-id], [data-vimeo-url]'));\n\n  var handleError = function handleError(error) {\n    if ('console' in window && console.error) {\n      console.error(\"There was an error creating an embed: \".concat(error));\n    }\n  };\n\n  elements.forEach(function (element) {\n    try {\n      // Skip any that have data-vimeo-defer\n      if (element.getAttribute('data-vimeo-defer') !== null) {\n        return;\n      }\n\n      var params = getOEmbedParameters(element);\n      var url = getVimeoUrl(params);\n      getOEmbedData(url, params, element).then(function (data) {\n        return createEmbed(data, element);\n      })[\"catch\"](handleError);\n    } catch (error) {\n      handleError(error);\n    }\n  });\n}\n/**\n * Resize embeds when messaged by the player.\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\n\n\nfunction resizeEmbeds() {\n  var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document; // Prevent execution if users include the player.js script multiple times.\n\n  if (window.VimeoPlayerResizeEmbeds_) {\n    return;\n  }\n\n  window.VimeoPlayerResizeEmbeds_ = true;\n\n  var onMessage = function onMessage(event) {\n    if (!isVimeoUrl(event.origin)) {\n      return;\n    } // 'spacechange' is fired only on embeds with cards\n\n\n    if (!event.data || event.data.event !== 'spacechange') {\n      return;\n    }\n\n    var iframes = parent.querySelectorAll('iframe');\n\n    for (var i = 0; i < iframes.length; i++) {\n      if (iframes[i].contentWindow !== event.source) {\n        continue;\n      } // Change padding-bottom of the enclosing div to accommodate\n      // card carousel without distorting aspect ratio\n\n\n      var space = iframes[i].parentElement;\n      space.style.paddingBottom = \"\".concat(event.data.data[0].bottom, \"px\");\n      break;\n    }\n  };\n\n  if (window.addEventListener) {\n    window.addEventListener('message', onMessage, false);\n  } else if (window.attachEvent) {\n    window.attachEvent('onmessage', onMessage);\n  }\n}\n/**\n * @module lib/postmessage\n */\n\n/**\n * Parse a message received from postMessage.\n *\n * @param {*} data The data received from postMessage.\n * @return {object}\n */\n\n\nfunction parseMessageData(data) {\n  if (typeof data === 'string') {\n    try {\n      data = JSON.parse(data);\n    } catch (error) {\n      // If the message cannot be parsed, throw the error as a warning\n      console.warn(error);\n      return {};\n    }\n  }\n\n  return data;\n}\n/**\n * Post a message to the specified target.\n *\n * @param {Player} player The player object to use.\n * @param {string} method The API method to call.\n * @param {object} params The parameters to send to the player.\n * @return {void}\n */\n\n\nfunction postMessage(player, method, params) {\n  if (!player.element.contentWindow || !player.element.contentWindow.postMessage) {\n    return;\n  }\n\n  var message = {\n    method: method\n  };\n\n  if (params !== undefined) {\n    message.value = params;\n  } // IE 8 and 9 do not support passing messages, so stringify them\n\n\n  var ieVersion = parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\\d+).*$/, '$1'));\n\n  if (ieVersion >= 8 && ieVersion < 10) {\n    message = JSON.stringify(message);\n  }\n\n  player.element.contentWindow.postMessage(message, player.origin);\n}\n/**\n * Parse the data received from a message event.\n *\n * @param {Player} player The player that received the message.\n * @param {(Object|string)} data The message data. Strings will be parsed into JSON.\n * @return {void}\n */\n\n\nfunction processData(player, data) {\n  data = parseMessageData(data);\n  var callbacks = [];\n  var param;\n\n  if (data.event) {\n    if (data.event === 'error') {\n      var promises = getCallbacks(player, data.data.method);\n      promises.forEach(function (promise) {\n        var error = new Error(data.data.message);\n        error.name = data.data.name;\n        promise.reject(error);\n        removeCallback(player, data.data.method, promise);\n      });\n    }\n\n    callbacks = getCallbacks(player, \"event:\".concat(data.event));\n    param = data.data;\n  } else if (data.method) {\n    var callback = shiftCallbacks(player, data.method);\n\n    if (callback) {\n      callbacks.push(callback);\n      param = data.value;\n    }\n  }\n\n  callbacks.forEach(function (callback) {\n    try {\n      if (typeof callback === 'function') {\n        callback.call(player, param);\n        return;\n      }\n\n      callback.resolve(param);\n    } catch (e) {// empty\n    }\n  });\n}\n\nvar playerMap = new WeakMap();\nvar readyMap = new WeakMap();\n\nvar Player =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a Player.\n   *\n   * @param {(HTMLIFrameElement|HTMLElement|string|jQuery)} element A reference to the Vimeo\n   *        player iframe, and id, or a jQuery object.\n   * @param {object} [options] oEmbed parameters to use when creating an embed in the element.\n   * @return {Player}\n   */\n  function Player(element) {\n    var _this = this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Player);\n    /* global jQuery */\n\n\n    if (window.jQuery && element instanceof jQuery) {\n      if (element.length > 1 && window.console && console.warn) {\n        console.warn('A jQuery object with multiple elements was passed, using the first element.');\n      }\n\n      element = element[0];\n    } // Find an element by ID\n\n\n    if (typeof document !== 'undefined' && typeof element === 'string') {\n      element = document.getElementById(element);\n    } // Not an element!\n\n\n    if (!isDomElement(element)) {\n      throw new TypeError('You must pass either a valid element or a valid id.');\n    }\n\n    var win = element.ownerDocument.defaultView; // Already initialized an embed in this div, so grab the iframe\n\n    if (element.nodeName !== 'IFRAME') {\n      var iframe = element.querySelector('iframe');\n\n      if (iframe) {\n        element = iframe;\n      }\n    } // iframe url is not a Vimeo url\n\n\n    if (element.nodeName === 'IFRAME' && !isVimeoUrl(element.getAttribute('src') || '')) {\n      throw new Error('The player element passed isn’t a Vimeo embed.');\n    } // If there is already a player object in the map, return that\n\n\n    if (playerMap.has(element)) {\n      return playerMap.get(element);\n    }\n\n    this.element = element;\n    this.origin = '*';\n    var readyPromise = new npo_src(function (resolve, reject) {\n      var onMessage = function onMessage(event) {\n        if (!isVimeoUrl(event.origin) || _this.element.contentWindow !== event.source) {\n          return;\n        }\n\n        if (_this.origin === '*') {\n          _this.origin = event.origin;\n        }\n\n        var data = parseMessageData(event.data);\n        var isError = data && data.event === 'error';\n        var isReadyError = isError && data.data && data.data.method === 'ready';\n\n        if (isReadyError) {\n          var error = new Error(data.data.message);\n          error.name = data.data.name;\n          reject(error);\n          return;\n        }\n\n        var isReadyEvent = data && data.event === 'ready';\n        var isPingResponse = data && data.method === 'ping';\n\n        if (isReadyEvent || isPingResponse) {\n          _this.element.setAttribute('data-ready', 'true');\n\n          resolve();\n          return;\n        }\n\n        processData(_this, data);\n      };\n\n      if (win.addEventListener) {\n        win.addEventListener('message', onMessage, false);\n      } else if (win.attachEvent) {\n        win.attachEvent('onmessage', onMessage);\n      }\n\n      if (_this.element.nodeName !== 'IFRAME') {\n        var params = getOEmbedParameters(element, options);\n        var url = getVimeoUrl(params);\n        getOEmbedData(url, params, element).then(function (data) {\n          var iframe = createEmbed(data, element); // Overwrite element with the new iframe,\n          // but store reference to the original element\n\n          _this.element = iframe;\n          _this._originalElement = element;\n          swapCallbacks(element, iframe);\n          playerMap.set(_this.element, _this);\n          return data;\n        })[\"catch\"](reject);\n      }\n    }); // Store a copy of this Player in the map\n\n    readyMap.set(this, readyPromise);\n    playerMap.set(this.element, this); // Send a ping to the iframe so the ready promise will be resolved if\n    // the player is already ready.\n\n    if (this.element.nodeName === 'IFRAME') {\n      postMessage(this, 'ping');\n    }\n\n    return this;\n  }\n  /**\n   * Get a promise for a method.\n   *\n   * @param {string} name The API method to call.\n   * @param {Object} [args={}] Arguments to send via postMessage.\n   * @return {Promise}\n   */\n\n\n  _createClass(Player, [{\n    key: \"callMethod\",\n    value: function callMethod(name) {\n      var _this2 = this;\n\n      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new npo_src(function (resolve, reject) {\n        // We are storing the resolve/reject handlers to call later, so we\n        // can’t return here.\n        // eslint-disable-next-line promise/always-return\n        return _this2.ready().then(function () {\n          storeCallback(_this2, name, {\n            resolve: resolve,\n            reject: reject\n          });\n          postMessage(_this2, name, args);\n        })[\"catch\"](reject);\n      });\n    }\n    /**\n     * Get a promise for the value of a player property.\n     *\n     * @param {string} name The property name\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      var _this3 = this;\n\n      return new npo_src(function (resolve, reject) {\n        name = getMethodName(name, 'get'); // We are storing the resolve/reject handlers to call later, so we\n        // can’t return here.\n        // eslint-disable-next-line promise/always-return\n\n        return _this3.ready().then(function () {\n          storeCallback(_this3, name, {\n            resolve: resolve,\n            reject: reject\n          });\n          postMessage(_this3, name);\n        })[\"catch\"](reject);\n      });\n    }\n    /**\n     * Get a promise for setting the value of a player property.\n     *\n     * @param {string} name The API method to call.\n     * @param {mixed} value The value to set.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      var _this4 = this;\n\n      return new npo_src(function (resolve, reject) {\n        name = getMethodName(name, 'set');\n\n        if (value === undefined || value === null) {\n          throw new TypeError('There must be a value to set.');\n        } // We are storing the resolve/reject handlers to call later, so we\n        // can’t return here.\n        // eslint-disable-next-line promise/always-return\n\n\n        return _this4.ready().then(function () {\n          storeCallback(_this4, name, {\n            resolve: resolve,\n            reject: reject\n          });\n          postMessage(_this4, name, value);\n        })[\"catch\"](reject);\n      });\n    }\n    /**\n     * Add an event listener for the specified event. Will call the\n     * callback with a single parameter, `data`, that contains the data for\n     * that event.\n     *\n     * @param {string} eventName The name of the event.\n     * @param {function(*)} callback The function to call when the event fires.\n     * @return {void}\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(eventName, callback) {\n      if (!eventName) {\n        throw new TypeError('You must pass an event name.');\n      }\n\n      if (!callback) {\n        throw new TypeError('You must pass a callback function.');\n      }\n\n      if (typeof callback !== 'function') {\n        throw new TypeError('The callback must be a function.');\n      }\n\n      var callbacks = getCallbacks(this, \"event:\".concat(eventName));\n\n      if (callbacks.length === 0) {\n        this.callMethod('addEventListener', eventName)[\"catch\"](function () {// Ignore the error. There will be an error event fired that\n          // will trigger the error callback if they are listening.\n        });\n      }\n\n      storeCallback(this, \"event:\".concat(eventName), callback);\n    }\n    /**\n     * Remove an event listener for the specified event. Will remove all\n     * listeners for that event if a `callback` isn’t passed, or only that\n     * specific callback if it is passed.\n     *\n     * @param {string} eventName The name of the event.\n     * @param {function} [callback] The specific callback to remove.\n     * @return {void}\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(eventName, callback) {\n      if (!eventName) {\n        throw new TypeError('You must pass an event name.');\n      }\n\n      if (callback && typeof callback !== 'function') {\n        throw new TypeError('The callback must be a function.');\n      }\n\n      var lastCallback = removeCallback(this, \"event:\".concat(eventName), callback); // If there are no callbacks left, remove the listener\n\n      if (lastCallback) {\n        this.callMethod('removeEventListener', eventName)[\"catch\"](function (e) {// Ignore the error. There will be an error event fired that\n          // will trigger the error callback if they are listening.\n        });\n      }\n    }\n    /**\n     * A promise to load a new video.\n     *\n     * @promise LoadVideoPromise\n     * @fulfill {number} The video with this id successfully loaded.\n     * @reject {TypeError} The id was not a number.\n     */\n\n    /**\n     * Load a new video into this embed. The promise will be resolved if\n     * the video is successfully loaded, or it will be rejected if it could\n     * not be loaded.\n     *\n     * @param {number|object} options The id of the video or an object with embed options.\n     * @return {LoadVideoPromise}\n     */\n\n  }, {\n    key: \"loadVideo\",\n    value: function loadVideo(options) {\n      return this.callMethod('loadVideo', options);\n    }\n    /**\n     * A promise to perform an action when the Player is ready.\n     *\n     * @todo document errors\n     * @promise LoadVideoPromise\n     * @fulfill {void}\n     */\n\n    /**\n     * Trigger a function when the player iframe has initialized. You do not\n     * need to wait for `ready` to trigger to begin adding event listeners\n     * or calling other methods.\n     *\n     * @return {ReadyPromise}\n     */\n\n  }, {\n    key: \"ready\",\n    value: function ready() {\n      var readyPromise = readyMap.get(this) || new npo_src(function (resolve, reject) {\n        reject(new Error('Unknown player. Probably unloaded.'));\n      });\n      return npo_src.resolve(readyPromise);\n    }\n    /**\n     * A promise to add a cue point to the player.\n     *\n     * @promise AddCuePointPromise\n     * @fulfill {string} The id of the cue point to use for removeCuePoint.\n     * @reject {RangeError} the time was less than 0 or greater than the\n     *         video’s duration.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Add a cue point to the player.\n     *\n     * @param {number} time The time for the cue point.\n     * @param {object} [data] Arbitrary data to be returned with the cue point.\n     * @return {AddCuePointPromise}\n     */\n\n  }, {\n    key: \"addCuePoint\",\n    value: function addCuePoint(time) {\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this.callMethod('addCuePoint', {\n        time: time,\n        data: data\n      });\n    }\n    /**\n     * A promise to remove a cue point from the player.\n     *\n     * @promise AddCuePointPromise\n     * @fulfill {string} The id of the cue point that was removed.\n     * @reject {InvalidCuePoint} The cue point with the specified id was not\n     *         found.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Remove a cue point from the video.\n     *\n     * @param {string} id The id of the cue point to remove.\n     * @return {RemoveCuePointPromise}\n     */\n\n  }, {\n    key: \"removeCuePoint\",\n    value: function removeCuePoint(id) {\n      return this.callMethod('removeCuePoint', id);\n    }\n    /**\n     * A representation of a text track on a video.\n     *\n     * @typedef {Object} VimeoTextTrack\n     * @property {string} language The ISO language code.\n     * @property {string} kind The kind of track it is (captions or subtitles).\n     * @property {string} label The human‐readable label for the track.\n     */\n\n    /**\n     * A promise to enable a text track.\n     *\n     * @promise EnableTextTrackPromise\n     * @fulfill {VimeoTextTrack} The text track that was enabled.\n     * @reject {InvalidTrackLanguageError} No track was available with the\n     *         specified language.\n     * @reject {InvalidTrackError} No track was available with the specified\n     *         language and kind.\n     */\n\n    /**\n     * Enable the text track with the specified language, and optionally the\n     * specified kind (captions or subtitles).\n     *\n     * When set via the API, the track language will not change the viewer’s\n     * stored preference.\n     *\n     * @param {string} language The two‐letter language code.\n     * @param {string} [kind] The kind of track to enable (captions or subtitles).\n     * @return {EnableTextTrackPromise}\n     */\n\n  }, {\n    key: \"enableTextTrack\",\n    value: function enableTextTrack(language, kind) {\n      if (!language) {\n        throw new TypeError('You must pass a language.');\n      }\n\n      return this.callMethod('enableTextTrack', {\n        language: language,\n        kind: kind\n      });\n    }\n    /**\n     * A promise to disable the active text track.\n     *\n     * @promise DisableTextTrackPromise\n     * @fulfill {void} The track was disabled.\n     */\n\n    /**\n     * Disable the currently-active text track.\n     *\n     * @return {DisableTextTrackPromise}\n     */\n\n  }, {\n    key: \"disableTextTrack\",\n    value: function disableTextTrack() {\n      return this.callMethod('disableTextTrack');\n    }\n    /**\n     * A promise to pause the video.\n     *\n     * @promise PausePromise\n     * @fulfill {void} The video was paused.\n     */\n\n    /**\n     * Pause the video if it’s playing.\n     *\n     * @return {PausePromise}\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      return this.callMethod('pause');\n    }\n    /**\n     * A promise to play the video.\n     *\n     * @promise PlayPromise\n     * @fulfill {void} The video was played.\n     */\n\n    /**\n     * Play the video if it’s paused. **Note:** on iOS and some other\n     * mobile devices, you cannot programmatically trigger play. Once the\n     * viewer has tapped on the play button in the player, however, you\n     * will be able to use this function.\n     *\n     * @return {PlayPromise}\n     */\n\n  }, {\n    key: \"play\",\n    value: function play() {\n      return this.callMethod('play');\n    }\n    /**\n     * A promise to unload the video.\n     *\n     * @promise UnloadPromise\n     * @fulfill {void} The video was unloaded.\n     */\n\n    /**\n     * Return the player to its initial state.\n     *\n     * @return {UnloadPromise}\n     */\n\n  }, {\n    key: \"unload\",\n    value: function unload() {\n      return this.callMethod('unload');\n    }\n    /**\n     * Cleanup the player and remove it from the DOM\n     *\n     * It won't be usable and a new one should be constructed\n     *  in order to do any operations.\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this5 = this;\n\n      return new npo_src(function (resolve) {\n        readyMap[\"delete\"](_this5);\n        playerMap[\"delete\"](_this5.element);\n\n        if (_this5._originalElement) {\n          playerMap[\"delete\"](_this5._originalElement);\n\n          _this5._originalElement.removeAttribute('data-vimeo-initialized');\n        }\n\n        if (_this5.element && _this5.element.nodeName === 'IFRAME' && _this5.element.parentNode) {\n          _this5.element.parentNode.removeChild(_this5.element);\n        }\n\n        resolve();\n      });\n    }\n    /**\n     * A promise to get the autopause behavior of the video.\n     *\n     * @promise GetAutopausePromise\n     * @fulfill {boolean} Whether autopause is turned on or off.\n     * @reject {UnsupportedError} Autopause is not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Get the autopause behavior for this player.\n     *\n     * @return {GetAutopausePromise}\n     */\n\n  }, {\n    key: \"getAutopause\",\n    value: function getAutopause() {\n      return this.get('autopause');\n    }\n    /**\n     * A promise to set the autopause behavior of the video.\n     *\n     * @promise SetAutopausePromise\n     * @fulfill {boolean} Whether autopause is turned on or off.\n     * @reject {UnsupportedError} Autopause is not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Enable or disable the autopause behavior of this player.\n     *\n     * By default, when another video is played in the same browser, this\n     * player will automatically pause. Unless you have a specific reason\n     * for doing so, we recommend that you leave autopause set to the\n     * default (`true`).\n     *\n     * @param {boolean} autopause\n     * @return {SetAutopausePromise}\n     */\n\n  }, {\n    key: \"setAutopause\",\n    value: function setAutopause(autopause) {\n      return this.set('autopause', autopause);\n    }\n    /**\n     * A promise to get the buffered property of the video.\n     *\n     * @promise GetBufferedPromise\n     * @fulfill {Array} Buffered Timeranges converted to an Array.\n     */\n\n    /**\n     * Get the buffered property of the video.\n     *\n     * @return {GetBufferedPromise}\n     */\n\n  }, {\n    key: \"getBuffered\",\n    value: function getBuffered() {\n      return this.get('buffered');\n    }\n    /**\n     * A promise to get the color of the player.\n     *\n     * @promise GetColorPromise\n     * @fulfill {string} The hex color of the player.\n     */\n\n    /**\n     * Get the color for this player.\n     *\n     * @return {GetColorPromise}\n     */\n\n  }, {\n    key: \"getColor\",\n    value: function getColor() {\n      return this.get('color');\n    }\n    /**\n     * A promise to set the color of the player.\n     *\n     * @promise SetColorPromise\n     * @fulfill {string} The color was successfully set.\n     * @reject {TypeError} The string was not a valid hex or rgb color.\n     * @reject {ContrastError} The color was set, but the contrast is\n     *         outside of the acceptable range.\n     * @reject {EmbedSettingsError} The owner of the player has chosen to\n     *         use a specific color.\n     */\n\n    /**\n     * Set the color of this player to a hex or rgb string. Setting the\n     * color may fail if the owner of the video has set their embed\n     * preferences to force a specific color.\n     *\n     * @param {string} color The hex or rgb color string to set.\n     * @return {SetColorPromise}\n     */\n\n  }, {\n    key: \"setColor\",\n    value: function setColor(color) {\n      return this.set('color', color);\n    }\n    /**\n     * A representation of a cue point.\n     *\n     * @typedef {Object} VimeoCuePoint\n     * @property {number} time The time of the cue point.\n     * @property {object} data The data passed when adding the cue point.\n     * @property {string} id The unique id for use with removeCuePoint.\n     */\n\n    /**\n     * A promise to get the cue points of a video.\n     *\n     * @promise GetCuePointsPromise\n     * @fulfill {VimeoCuePoint[]} The cue points added to the video.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Get an array of the cue points added to the video.\n     *\n     * @return {GetCuePointsPromise}\n     */\n\n  }, {\n    key: \"getCuePoints\",\n    value: function getCuePoints() {\n      return this.get('cuePoints');\n    }\n    /**\n     * A promise to get the current time of the video.\n     *\n     * @promise GetCurrentTimePromise\n     * @fulfill {number} The current time in seconds.\n     */\n\n    /**\n     * Get the current playback position in seconds.\n     *\n     * @return {GetCurrentTimePromise}\n     */\n\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.get('currentTime');\n    }\n    /**\n     * A promise to set the current time of the video.\n     *\n     * @promise SetCurrentTimePromise\n     * @fulfill {number} The actual current time that was set.\n     * @reject {RangeError} the time was less than 0 or greater than the\n     *         video’s duration.\n     */\n\n    /**\n     * Set the current playback position in seconds. If the player was\n     * paused, it will remain paused. Likewise, if the player was playing,\n     * it will resume playing once the video has buffered.\n     *\n     * You can provide an accurate time and the player will attempt to seek\n     * to as close to that time as possible. The exact time will be the\n     * fulfilled value of the promise.\n     *\n     * @param {number} currentTime\n     * @return {SetCurrentTimePromise}\n     */\n\n  }, {\n    key: \"setCurrentTime\",\n    value: function setCurrentTime(currentTime) {\n      return this.set('currentTime', currentTime);\n    }\n    /**\n     * A promise to get the duration of the video.\n     *\n     * @promise GetDurationPromise\n     * @fulfill {number} The duration in seconds.\n     */\n\n    /**\n     * Get the duration of the video in seconds. It will be rounded to the\n     * nearest second before playback begins, and to the nearest thousandth\n     * of a second after playback begins.\n     *\n     * @return {GetDurationPromise}\n     */\n\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      return this.get('duration');\n    }\n    /**\n     * A promise to get the ended state of the video.\n     *\n     * @promise GetEndedPromise\n     * @fulfill {boolean} Whether or not the video has ended.\n     */\n\n    /**\n     * Get the ended state of the video. The video has ended if\n     * `currentTime === duration`.\n     *\n     * @return {GetEndedPromise}\n     */\n\n  }, {\n    key: \"getEnded\",\n    value: function getEnded() {\n      return this.get('ended');\n    }\n    /**\n     * A promise to get the loop state of the player.\n     *\n     * @promise GetLoopPromise\n     * @fulfill {boolean} Whether or not the player is set to loop.\n     */\n\n    /**\n     * Get the loop state of the player.\n     *\n     * @return {GetLoopPromise}\n     */\n\n  }, {\n    key: \"getLoop\",\n    value: function getLoop() {\n      return this.get('loop');\n    }\n    /**\n     * A promise to set the loop state of the player.\n     *\n     * @promise SetLoopPromise\n     * @fulfill {boolean} The loop state that was set.\n     */\n\n    /**\n     * Set the loop state of the player. When set to `true`, the player\n     * will start over immediately once playback ends.\n     *\n     * @param {boolean} loop\n     * @return {SetLoopPromise}\n     */\n\n  }, {\n    key: \"setLoop\",\n    value: function setLoop(loop) {\n      return this.set('loop', loop);\n    }\n    /**\n     * A promise to set the muted state of the player.\n     *\n     * @promise SetMutedPromise\n     * @fulfill {boolean} The muted state that was set.\n     */\n\n    /**\n     * Set the muted state of the player. When set to `true`, the player\n     * volume will be muted.\n     *\n     * @param {boolean} muted\n     * @return {SetMutedPromise}\n     */\n\n  }, {\n    key: \"setMuted\",\n    value: function setMuted(muted) {\n      return this.set('muted', muted);\n    }\n    /**\n     * A promise to get the muted state of the player.\n     *\n     * @promise GetMutedPromise\n     * @fulfill {boolean} Whether or not the player is muted.\n     */\n\n    /**\n     * Get the muted state of the player.\n     *\n     * @return {GetMutedPromise}\n     */\n\n  }, {\n    key: \"getMuted\",\n    value: function getMuted() {\n      return this.get('muted');\n    }\n    /**\n     * A promise to get the paused state of the player.\n     *\n     * @promise GetLoopPromise\n     * @fulfill {boolean} Whether or not the video is paused.\n     */\n\n    /**\n     * Get the paused state of the player.\n     *\n     * @return {GetLoopPromise}\n     */\n\n  }, {\n    key: \"getPaused\",\n    value: function getPaused() {\n      return this.get('paused');\n    }\n    /**\n     * A promise to get the playback rate of the player.\n     *\n     * @promise GetPlaybackRatePromise\n     * @fulfill {number} The playback rate of the player on a scale from 0.5 to 2.\n     */\n\n    /**\n     * Get the playback rate of the player on a scale from `0.5` to `2`.\n     *\n     * @return {GetPlaybackRatePromise}\n     */\n\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.get('playbackRate');\n    }\n    /**\n     * A promise to set the playbackrate of the player.\n     *\n     * @promise SetPlaybackRatePromise\n     * @fulfill {number} The playback rate was set.\n     * @reject {RangeError} The playback rate was less than 0.5 or greater than 2.\n     */\n\n    /**\n     * Set the playback rate of the player on a scale from `0.5` to `2`. When set\n     * via the API, the playback rate will not be synchronized to other\n     * players or stored as the viewer's preference.\n     *\n     * @param {number} playbackRate\n     * @return {SetPlaybackRatePromise}\n     */\n\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(playbackRate) {\n      return this.set('playbackRate', playbackRate);\n    }\n    /**\n     * A promise to get the played property of the video.\n     *\n     * @promise GetPlayedPromise\n     * @fulfill {Array} Played Timeranges converted to an Array.\n     */\n\n    /**\n     * Get the played property of the video.\n     *\n     * @return {GetPlayedPromise}\n     */\n\n  }, {\n    key: \"getPlayed\",\n    value: function getPlayed() {\n      return this.get('played');\n    }\n    /**\n     * A promise to get the seekable property of the video.\n     *\n     * @promise GetSeekablePromise\n     * @fulfill {Array} Seekable Timeranges converted to an Array.\n     */\n\n    /**\n     * Get the seekable property of the video.\n     *\n     * @return {GetSeekablePromise}\n     */\n\n  }, {\n    key: \"getSeekable\",\n    value: function getSeekable() {\n      return this.get('seekable');\n    }\n    /**\n     * A promise to get the seeking property of the player.\n     *\n     * @promise GetSeekingPromise\n     * @fulfill {boolean} Whether or not the player is currently seeking.\n     */\n\n    /**\n     * Get if the player is currently seeking.\n     *\n     * @return {GetSeekingPromise}\n     */\n\n  }, {\n    key: \"getSeeking\",\n    value: function getSeeking() {\n      return this.get('seeking');\n    }\n    /**\n     * A promise to get the text tracks of a video.\n     *\n     * @promise GetTextTracksPromise\n     * @fulfill {VimeoTextTrack[]} The text tracks associated with the video.\n     */\n\n    /**\n     * Get an array of the text tracks that exist for the video.\n     *\n     * @return {GetTextTracksPromise}\n     */\n\n  }, {\n    key: \"getTextTracks\",\n    value: function getTextTracks() {\n      return this.get('textTracks');\n    }\n    /**\n     * A promise to get the embed code for the video.\n     *\n     * @promise GetVideoEmbedCodePromise\n     * @fulfill {string} The `<iframe>` embed code for the video.\n     */\n\n    /**\n     * Get the `<iframe>` embed code for the video.\n     *\n     * @return {GetVideoEmbedCodePromise}\n     */\n\n  }, {\n    key: \"getVideoEmbedCode\",\n    value: function getVideoEmbedCode() {\n      return this.get('videoEmbedCode');\n    }\n    /**\n     * A promise to get the id of the video.\n     *\n     * @promise GetVideoIdPromise\n     * @fulfill {number} The id of the video.\n     */\n\n    /**\n     * Get the id of the video.\n     *\n     * @return {GetVideoIdPromise}\n     */\n\n  }, {\n    key: \"getVideoId\",\n    value: function getVideoId() {\n      return this.get('videoId');\n    }\n    /**\n     * A promise to get the title of the video.\n     *\n     * @promise GetVideoTitlePromise\n     * @fulfill {number} The title of the video.\n     */\n\n    /**\n     * Get the title of the video.\n     *\n     * @return {GetVideoTitlePromise}\n     */\n\n  }, {\n    key: \"getVideoTitle\",\n    value: function getVideoTitle() {\n      return this.get('videoTitle');\n    }\n    /**\n     * A promise to get the native width of the video.\n     *\n     * @promise GetVideoWidthPromise\n     * @fulfill {number} The native width of the video.\n     */\n\n    /**\n     * Get the native width of the currently‐playing video. The width of\n     * the highest‐resolution available will be used before playback begins.\n     *\n     * @return {GetVideoWidthPromise}\n     */\n\n  }, {\n    key: \"getVideoWidth\",\n    value: function getVideoWidth() {\n      return this.get('videoWidth');\n    }\n    /**\n     * A promise to get the native height of the video.\n     *\n     * @promise GetVideoHeightPromise\n     * @fulfill {number} The native height of the video.\n     */\n\n    /**\n     * Get the native height of the currently‐playing video. The height of\n     * the highest‐resolution available will be used before playback begins.\n     *\n     * @return {GetVideoHeightPromise}\n     */\n\n  }, {\n    key: \"getVideoHeight\",\n    value: function getVideoHeight() {\n      return this.get('videoHeight');\n    }\n    /**\n     * A promise to get the vimeo.com url for the video.\n     *\n     * @promise GetVideoUrlPromise\n     * @fulfill {number} The vimeo.com url for the video.\n     * @reject {PrivacyError} The url isn’t available because of the video’s privacy setting.\n     */\n\n    /**\n     * Get the vimeo.com url for the video.\n     *\n     * @return {GetVideoUrlPromise}\n     */\n\n  }, {\n    key: \"getVideoUrl\",\n    value: function getVideoUrl() {\n      return this.get('videoUrl');\n    }\n    /**\n     * A promise to get the volume level of the player.\n     *\n     * @promise GetVolumePromise\n     * @fulfill {number} The volume level of the player on a scale from 0 to 1.\n     */\n\n    /**\n     * Get the current volume level of the player on a scale from `0` to `1`.\n     *\n     * Most mobile devices do not support an independent volume from the\n     * system volume. In those cases, this method will always return `1`.\n     *\n     * @return {GetVolumePromise}\n     */\n\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.get('volume');\n    }\n    /**\n     * A promise to set the volume level of the player.\n     *\n     * @promise SetVolumePromise\n     * @fulfill {number} The volume was set.\n     * @reject {RangeError} The volume was less than 0 or greater than 1.\n     */\n\n    /**\n     * Set the volume of the player on a scale from `0` to `1`. When set\n     * via the API, the volume level will not be synchronized to other\n     * players or stored as the viewer’s preference.\n     *\n     * Most mobile devices do not support setting the volume. An error will\n     * *not* be triggered in that situation.\n     *\n     * @param {number} volume\n     * @return {SetVolumePromise}\n     */\n\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(volume) {\n      return this.set('volume', volume);\n    }\n  }]);\n\n  return Player;\n}(); // Setup embed only if this is not a node environment\n\n\nif (!isNode) {\n  initializeEmbeds();\n  resizeEmbeds();\n}\n\nexport default Player;","import React, { Component } from \"react\";\nimport Img from \"gatsby-image\";\n\nimport VimeoEl from \"../components/Vimeo\";\n\nexport default class Hero extends Component {\n  state = {\n    heroImgLoaded: false,\n    heroVideoLoaded: false\n  }\n\n  heroEl = React.createRef();\n\n  heroImgLoaded(){\n    setTimeout(() => {\n      this.setState({ heroImgLoaded: true });\n    }, 400)\n  }\n\n  videoLoaded(){\n    this.setState({ heroVideoLoaded: true });\n  }\n\n  componentDidMount(){\n    setTimeout(() => {\n      this.heroEl.current.style.backgroundColor = this.props.heroImage.optimizedimages.colorPalette[0]\n    }, 100);\n  }\n\n  render(){\n    let vimeoUrl = false;\n  \n    if(this.props.heroBannerVideo !== null){\n      let vimeoSplit = this.props.heroBannerVideo.split(\"/\");\n      \n      vimeoUrl = vimeoSplit[vimeoSplit.length - 1];\n\n      // try make weird viemo links work as well as the normal ones\n      if(!/^\\d+$/.test(vimeoUrl)){\n        vimeoUrl = vimeoSplit[vimeoSplit.length - 2];\n      }\n    }\n\n    return(\n      <div className=\"article__hero\" ref={this.heroEl}>\n        <Img \n          className={`\n            article__hero-media \n            ${!this.state.heroImgLoaded ? \"-zeroWidth\" : \"\"}\n            ${this.state.videoLoaded ? \"-hidden\" : \"\"}\n          `} \n          fluid={ this.props.heroImage.imageFile.childImageSharp.fluid }\n          onLoad={ this.heroImgLoaded.bind(this) }\n        />\n  \n        {vimeoUrl && (\n          <VimeoEl \n            className={`vimeo__video article__hero-vimeo`} \n            vimeoOptions={{ id: vimeoUrl, loop: true, background: true }}\n            style={{ position: \"absolute\" }}\n            videoPlayingCallback={ this.videoLoaded.bind(this) }\n          />\n        )}\n      </div>\n    )\n  }\n}","import React from \"react\";\n\nconst Heading = ({ title, text }) => (\n  <div className=\"row article__header\">\n    <div className=\"col__6 col__m-6 col__s-12\">\n      <h1 className=\"article__title fontSize-h2\">{title}</h1>\n    </div>\n    <div className=\"col__6 col__m-6 col__s-12\">\n      <div className=\"article__heading\">\n        <h2 className=\"article__heading-text fontSize-h2\">{text}</h2>\n      </div>\n    </div>\n  </div>\n);\n\nexport default Heading;","import React from \"react\";\n\nconst Paragraph = ({ text }) => (\n  <div className=\"row\">\n    <div className=\"col__3 col__m-1-5 col__s-1\"></div>\n    <div className=\"col__6 col__m-9 col__s-10\">\n      <div className=\"article__paragraph\">\n        <p className=\"article__paragraph-text fontSize-p1\">{text}</p>\n      </div>\n    </div>\n    <div className=\"col__3 col__m-1-5 col__s-1\"></div>\n  </div>\n);\n\nexport default Paragraph;","import React from \"react\";\nimport { Link } from \"gatsby\";\n\nconst WhatWeDid = ({ data }) => {\n  return(\n    <div className=\"article__whatWeDid\">\n      <p className=\"article__whatWeDid-title fontSize-p3 fontSize-uppercase\">What we did</p>\n      <div className=\"article__whatWeDid-contain\">\n        <div className=\"article__whatWeDid-disciplines\">\n          <ul className=\"article__whatWeDid-disciplines-list fontSize-p1\">\n            {data.disciplines.map((discipline, i) =>\n              <li key={discipline.title.toLowerCase()} className=\"article__whatWeDid-disciplines-list-item fontSize-p1\">\n                <Link className=\"article__whatWeDid-disciplines-link\" to={`/work/${discipline.title.toLowerCase()}`}>{discipline.title}</Link>\n              </li>\n            )}\n\n            {data.categories.map((category, i) =>\n              <li key={category.title.toLowerCase()} className=\"article__whatWeDid-disciplines-list-item fontSize-p1\">\n                <Link className=\"article__whatWeDid-disciplines-link\" to={`/work/${category.title.toLowerCase()}`}>{category.title}</Link>\n              </li>\n            )}\n          </ul>\n        </div>\n        <div className=\"article__whatWeDid-seeMore\">\n          {data.externalLink &&\n            <a href={data.externalLink} target=\"_blank\" rel=\"noopener noreferrer\" className=\"article__whatWeDid-seeMore-link fontSize-p2\">See more here</a>\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default WhatWeDid;","export default ( currArticle, allArticles ) => {\n  let collectRelated = currArticle.relatedProjects,\n      firstArticleId = false;\n  // currently only takes into account discipline and categories separtely instead of taking both into account for match score\n\n  // check for matching disciplines first\n  if(collectRelated.length !== 2){\n    getMoreRelatedArticles(collectRelated, currArticle, allArticles, \"disciplines\");\n  }\n\n  // then matching categories --- currently not using categories\n  // if(collectRelated.length !== 2){\n  //   getMoreRelatedArticles(collectRelated, currArticle, allArticles, \"categories\");\n  // }\n\n  // if still not found 2, add most recent\n  if(collectRelated.length !== 2){\n    for(let i = 0; i < allArticles.length; i++){\n      if(collectRelated.length !== 2){\n        if(allArticles[i].id !== currArticle.id && allArticles[i].id !== firstArticleId){\n          if(collectRelated.length === 1 && allArticles[i].id !== collectRelated[0].id ){\n            collectRelated.push(allArticles[i]);\n          } else {\n            collectRelated.push(allArticles[i]);\n          }\n        }\n      } else {\n        break;\n      }\n    }\n  }\n\n  return collectRelated;\n}\n\nconst getMoreRelatedArticles = (collectRelated, currArticle, allArticles, tag) => {\n  let thisTag = currArticle[tag],\n      count = [],\n      projectTags = [],\n      firstArticleId = false;\n    \n  if(collectRelated.length === 1){\n    firstArticleId = collectRelated[0].id;\n  }\n\n  for(let i = 0; i < allArticles.length; i++){\n    if(allArticles[i].id !== currArticle.id && allArticles[i].id !== firstArticleId){\n      projectTags.push(allArticles[i][tag]);\n    } else {\n      projectTags.push([]);\n    }\n  }\n\n  // feel like this could be slimmed down\n  // maybe only push to array based on curr article tags first \n  for(let i = 0; i < thisTag.length; i++){ // loop through curr project disciplines\n    for(let j = 0; j < projectTags.length; j++){ // loop through all other projects\n      if(!count[j]){\n        count[j] = {\n          \"i\": j,\n          \"val\": 0\n        };\n      }\n\n      for(let k = 0; k < projectTags[j].length; k++){ // loop through other project's disciplines\n        if(projectTags[j][k] && thisTag[i].title === projectTags[j][k].title){\n          count[j].val++;\n        }\n      }\n    }\n  }\n\n  count.sort((a, b) => {\n    return b.val - a.val;\n  });\n\n  for(let i = 0; i < count.length; i++){\n    if(collectRelated.length === 2){\n      break;\n    }\n\n    if(count[i].val >= 1){ // if at least one matching tag found\n      collectRelated.push(allArticles[count[i].i]);\n    }\n  }\n}","import React, { useRef } from \"react\";\nimport { graphql, useStaticQuery } from \"gatsby\";\nimport Img from \"gatsby-image\";\nimport TransitionLink from \"gatsby-plugin-transition-link\";\n\nimport getRelatedArticles from \"./utils/getRelatedArticles\";\nimport { relatedArticlesTransition, newArticleFadeIn } from \"./utils/articleTransitions\";\n\nexport default (currArticle) => {\n  const data = useStaticQuery(graphql`\n    {\n      craft {\n        entries(section: [projects], hidden: false) {\n          ... on Craft_Projects{\n            hidden\n            id\n            slug\n            image{\n              width\n              height\n              ... on Craft_UploadsVolume {\n                url\n                imageFile{\n                  childImageSharp{\n                    fluid(maxWidth: 600){\n                      ...GatsbyImageSharpFluid_withWebp_noBase64\n                    }\n                  }\n                }\n                optimizedimages {\n                  colorPalette\n                }\n              }\n            }\n            disciplines {\n              title\n            }\n            categories {\n              title\n            }\n          }\n        }\n      }\n    }\n  `)\n\n  const allArticles = data.craft.entries,\n        related = getRelatedArticles( currArticle, allArticles ),\n        articleTransitionEl = useRef();\n\n  return(\n    <>\n      <div className=\"article__contain\">\n        {related ? (\n          <div className=\"article__related\">\n            <div className=\"article__related-title\">\n              <p className=\"article__related-title-text fontSize-p3 fontSize-uppercase\">Related Work</p>\n            </div>\n\n            <div className=\"article__related-links\">\n              {related.map((article, i) => {\n                const moduleImg = article.image[0],\n                      imgSharp = moduleImg.imageFile.childImageSharp,\n                      direction = i === 0 ? \"previous\" : \"next\";\n\n                return(\n                  <TransitionLink \n                    exit={{\n                      zIndex: 2,\n                      length: 2,\n                      trigger: ({ e }) => relatedArticlesTransition( articleTransitionEl, direction, e ),\n                    }}\n                    entry={{\n                      delay: 1,\n                      length: 0,\n                      trigger: ({ node }) => newArticleFadeIn( articleTransitionEl, node ),\n                    }}\n                    className=\"hover-cursor\" \n                    key={ article.slug } \n                    to={ \"/work/articles/\" + article.slug }\n                  >\n                    <Img \n                      className={`article__related-option -${direction}`}\n                      backgroundColor={ moduleImg.optimizedimages.colorPalette[0] }\n                      fluid={ imgSharp !== null ? imgSharp.fluid : { src: moduleImg.url } }\n                      style={{ position: \"absolute\" }}\n                    />\n                  </TransitionLink>\n                )\n              })}\n            </div>\n          </div>\n        ) : null} \n      </div>\n      <div className=\"article__movingOverlay\" ref={articleTransitionEl}/>\n    </>\n  )\n}","import { TweenLite } from \"gsap\";\n\nexport const relatedArticlesTransition = ( articleTransitionEl, direction, e ) => {\n  return new Promise(resolve => {\n    const target = e.target,\n          tileDimensions = target.getBoundingClientRect(),\n          heroEl = document.querySelector(\".article__hero\"),\n          heroDimensions = heroEl.getBoundingClientRect(),\n          scale = heroDimensions.width / tileDimensions.width;\n    \n    let imgSrc = target.src;\n\n    if(imgSrc === undefined){\n      const clicked = document.querySelector(`.article__related-option.-${direction}`);\n\n      imgSrc = clicked.querySelector(\"img\").src;\n    }\n\n    const copyTileStyle = {\n      backgroundImage: `url(${imgSrc})`,\n      top: tileDimensions.y + \"px\",\n      left: tileDimensions.x + \"px\",\n      width: tileDimensions.width + \"px\",\n      height: tileDimensions.height + \"px\",\n      opacity: 1,\n    };\n\n    TweenLite.to(articleTransitionEl.current, 0, { ...copyTileStyle });\n    document.querySelector(\".article\").classList.add(\"-fade\");\n\n    const growToHero = {\n      left: heroDimensions.x + \"px\",\n      height: heroDimensions.height / scale + \"px\",\n      scale: scale,\n      ease: 'Circ.easeOut'\n    };\n\n    TweenLite.to(articleTransitionEl.current, 0.4, { ...growToHero, onComplete: () => {\n      window.scrollTo(0, 0);\n\n      articleTransitionEl.current.style.filter = \"blur(3px)\";\n      TweenLite.to(articleTransitionEl.current, 0.6, { top: 0, ease: 'Circ.easeOut', onComplete: () => {\n        resolve();\n      }})\n    }})\n  })\n}\n\nexport const newArticleFadeIn = ( articleTransitionEl, node ) => {\n  const articleEl = node.querySelector(\".article\");\n\n  node.querySelector(\"nav\").classList.add(\"-hidden\"); // so hero img begin at top of screen\n  articleEl.classList.add(\"-articleTransition\");\n\n  const heroImg = articleEl.querySelector(\".article__hero-media\").querySelector(\"img\"),\n        styles = articleTransitionEl.current.getAttribute(\"style\"),\n        newTransitionEl = articleEl.querySelector(\".article__movingOverlay\");\n\n  newTransitionEl.setAttribute(\"style\", styles);\n  articleTransitionEl.current.style.opacity = 0;\n\n  const heroImgLoaded = () => {\n    newTransitionEl.style.opacity = 0;\n    setTimeout( newTransitionEl.setAttribute(\"style\", \"\"), 500 );      \n  };\n\n  if(heroImg.complete){\n    heroImgLoaded();\n  } else {\n    heroImg.addEventListener(\"load\", () => {\n      heroImgLoaded();\n    })\n  }\n}","import React, { Component } from \"react\";\nimport { graphql } from \"gatsby\";\nimport Img from \"gatsby-image\";\n\nimport Layout from \"../components/layout\";\n\nimport Hero from \"./hero.js\";\nimport Heading from \"./heading.js\";\nimport Paragraph from \"./paragraph.js\";\nimport WhatWeDid from \"./whatWeDid.js\";\nimport RelatedArticles from \"./relatedArticles.js\";\n\nimport VimeoEl from \"../components/Vimeo\";\n\nimport \"../styles/article.scss\";\n\nexport default class Article extends Component {\n  render(){\n    const entry = this.props.data.craft.entries[0];\n\n    return (\n      <Layout className=\"article\" seo={ entry.seomatic }>\n        <Hero heroImage={ entry.image[0] } heroBannerVideo={ entry.heroBannerVideo }/>\n\n        <div className=\"article__contain\">\n          <Heading \n            title={entry.projectName}\n            text={entry.heroTitle} \n          />\n\n          {entry.modules.map((item, i) => {\n            if(item.moduleText && item.moduleText.length > 0){\n              return (\n                <Paragraph key={\"module-\"+i} text={item.moduleText} />\n              )\n            }\n\n            if(item.moduleImage && item.moduleImage.length > 0){\n              const moduleImg = item.moduleImage[0],\n                    imgSharp = moduleImg.imageFile.childImageSharp;\n\n              return (\n                <div className=\"row article-media\" key={\"module-\"+i}>\n                  <Img \n                    className={`article__image-media`} \n                    backgroundColor={ moduleImg.optimizedimages.colorPalette[0] }\n                    fluid={ imgSharp !== null ? imgSharp.fluid : { src: moduleImg.url } }\n                  />\n                </div>\n              )\n            }\n\n            if(\n              (item.moduleVimeoAmbientBackground && item.moduleVimeoAmbientBackground.length > 0) \n              || \n              (item.moduleVimeoStory && item.moduleVimeoStory.length > 0)\n            ){\n                const ambient = item.moduleVimeoAmbientBackground !== undefined ? true : false,\n                      vimeoSplit = ambient ? item.moduleVimeoAmbientBackground.split(\"/\") : item.moduleVimeoStory.split(\"/\");\n\n                let vimeoUrl = vimeoSplit[vimeoSplit.length - 1];\n\n                // try make weird viemo links work as well as the normal ones\n                if(!/^\\d+$/.test(vimeoUrl)){\n                  vimeoUrl = vimeoSplit[vimeoSplit.length - 2];\n                }\n\n                let vimeoOptions = { id: vimeoUrl, loop: true, background: ambient ? true : false };\n\n                return (\n                  <div key={`module-${i}`} className=\"row article-media\">\n                    <VimeoEl className={\"vimeo__video aspect__16-by-9\"} vimeoOptions={ vimeoOptions } soundIcon={ item.soundButtonColour }/>\n                  </div>\n                )\n              }\n\n            return null;\n          })}\n\n          {entry.disciplines.length > 0 || entry.categories.length > 0 ? (\n            <WhatWeDid data={ entry }/>\n          ) : null}\n        </div>\n\n        <RelatedArticles {...entry} />\n      </Layout>\n    )\n  }\n}\n\nexport const query = graphql`\n  query($slug: String!) {\n    craft {\n      entries(section: [projects], slug: $slug) {\n        ... on Craft_Projects {\n          seomatic {\n            metaTagContainer\n            metaLinkContainer\n            metaTitleContainer\n            metaScriptContainer\n            metaJsonLdContainer\n          }\n          hidden\n          id\n          slug\n          heroTitle\n          projectName\n          previewTile {\n            height\n            width\n            url\n            ... on Craft_UploadsVolume {\n              optimizedimages {\n                ... on Craft_OptimizedImagesData {\n                  colorPalette\n                  srcUrls {\n                    url\n                    width\n                  }\n                }\n              }\n            }\n          }\n          video {\n            url\n            width\n            height\n          }\n          heroBannerVideo\n          image {\n            url\n            width\n            height\n            ... on Craft_UploadsVolume {\n              url\n\n              imageFile{\n                childImageSharp{\n                  fluid(maxWidth: 1920){\n                    ...GatsbyImageSharpFluid_withWebp_noBase64\n                  }\n                }\n              }\n\n              optimizedimages {\n                colorPalette\n              }\n            }\n          }\n          modules {\n            ... on Craft_ModulesModuleText {\n              moduleText\n            }\n            ... on Craft_ModulesModuleImage {\n              moduleImage {\n                url\n                width\n                height\n                ... on Craft_UploadsVolume {\n                  url \n\n                  imageFile{\n                    childImageSharp{\n                      fluid(maxWidth: 1100, quality: 90){\n                        ...GatsbyImageSharpFluid_withWebp_noBase64\n                      }\n                    }\n                  }\n\n                  optimizedimages {\n                    colorPalette\n                  }\n                }\n              }\n            }\n            ... on Craft_ModulesModuleVimeoAmbientBackground {\n              moduleVimeoAmbientBackground\n            }\n            ... on Craft_ModulesModuleVimeoStories {\n              moduleVimeoStory\n              soundButtonColour\n            }\n            ... on Craft_ModulesModuleVideoUpload {\n              moduleVideoUpload {\n                url\n                width\n                height\n              }\n            }\n            ... on Craft_ModulesModuleImageSequence {\n              moduleImageSequence {\n                ... on Craft_UploadsVolume {\n                  url\n                  width\n                  height\n                  ... on Craft_UploadsVolume {\n                    url \n\n                    imageFile{\n                      childImageSharp{\n                        fluid(maxWidth: 1100){\n                          ...GatsbyImageSharpFluid_withWebp_noBase64\n                        }\n                      }\n                    }\n\n                    optimizedimages {\n                      colorPalette\n                    }\n                  }\n                }\n              }\n            }\n          }\n          categories {\n            title\n          }\n          disciplines {\n            title\n          }\n          externalLink\n          relatedProjects(hidden: false) {\n            ... on Craft_Projects {\n              id\n              slug\n              image {\n                width\n                height\n                url\n\n                ... on Craft_UploadsVolume {\n                  imageFile{\n                    childImageSharp{\n                      fluid(maxWidth: 600){\n                        ...GatsbyImageSharpFluid_withWebp_noBase64\n                      }\n                    }\n                  }\n\n                  optimizedimages {\n                    colorPalette\n                  }\n                }\n              }\n              disciplines {\n                title\n              }\n              categories {\n                title\n              }\n            }\n          }\n        }\n      }\n    }\n  }  \n`;","import React from \"react\";\nimport VimeoAPI from \"@vimeo/player\";\n\n// import CheckAnimatingDone from \"../utils/CheckAnimatingDone\";\n\nconst checkWindow = (typeof window === `undefined`) ? false : true; // gatsby cannot have window called while building the pages\n\nlet screenSize;\n\nconst setScreenDimensions = () => {\n  screenSize = {\n    w: checkWindow ? window.innerWidth : 0,\n    h: checkWindow ? window.innerHeight : 0\n  }\n}\n\nif(checkWindow){\n  window.addEventListener(\"resize\", setScreenDimensions);\n}\n\nexport default class VimeoEl extends React.Component{\n  constructor(data){\n    super();\n\n    this.state = {\n      loading: true,\n      muted: true,\n    }\n\n    this.player = {\n      el: React.createRef(),\n      class: data.className,\n      options: {\n        ...data.vimeoOptions, \n        ...{ muted: true, autopuase: false }\n      },\n      clickPaused: false,\n      scrollPaused: false,\n      scrollPlay: false,\n      muteBtn: React.createRef(),\n      soundIconColor: data.soundIcon,\n    }\n  }\n\n  componentDidMount(){\n    this.init();\n  }\n\n  componentWillUnmount(){\n    if(checkWindow){\n      window.removeEventListener(\"scroll\", this.player.scrollEvent);\n      window.removeEventListener(\"resize\", this.player.resizeEvent);\n    }\n    \n    this.player.video.destroy();\n    // // $(\".-animating\").off(\"animationend\");\n  }\n\n  init(){\n    this.player.video = new VimeoAPI(this.player.el.current, this.player.options);\n\n    if(screenSize === undefined){\n      screenSize = {\n        w: checkWindow ? window.innerWidth : 0,\n        h: checkWindow ? window.innerHeight : 0\n      }\n    }\n\n    this.player.resizeEvent = this.onResize.bind(this);\n\n    if(checkWindow){\n      window.addEventListener(\"resize\", this.player.resizeEvent);\n    }\n    \n    this.player.video.on(\"play\",() => {\n      if(!this.player.scrollPlay){\n        if(this.player.options.background !== 1 && screenSize.w <= 1024){\n          this.player.video.setVolume(1);\n          this.setState({muted: false});\n        }\n\n        this.player.clickPaused = false;\n        this.player.scrollPause = false;\n      }\n\n      if(this.props.videoPlayingCallback) this.props.videoPlayingCallback();\n    });\n\n    this.player.video.on(\"pause\",() => {\n      if(this.checkIfVideoInView()){ // if not paused by scrolling\n        this.player.clickPaused = true;\n        this.player.scrollPlay = false;\n      }\n    });\n\n    this.player.video.ready().then(() => {\n      this.setState({ loading: false })\n      this.scrollPlayPauseVideo();\n\n      if(this.props.videoReadyCallback) this.props.videoReadyCallback();\n    })\n  }\n\n  onResize(){\n    if(this.player.el.current){ // if video is on the page\n      this.setVideoPositionDetails();\n    }\n  }\n\n  onScroll(){\n    if(screenSize.w > 1024){\n      window.requestAnimationFrame(() => {\n        this.screenTop = window.pageYOffset;\n        this.screenBottom = this.screenTop + screenSize.h;\n\n        if(this.checkIfVideoInView() && !this.player.clickPaused && !this.player.scrollPlay){\n          this.player.video.play().catch(err => {\n            console.log('err',err);\n          });\n\n          setTimeout(() => {\n            this.player.scrollPlay = true;\n            this.player.scrollPause = false;\n          },100);\n        } else if(!this.checkIfVideoInView() && !this.player.clickPaused && this.player.scrollPlay) {\n          this.player.video.pause().catch(err => {\n            console.log('err',err);\n          });\n          \n          setTimeout(() => {\n            this.player.scrollPlay = false;\n            this.player.scrollPause = true;\n          },100);\n        }\n      })\n    }\n  }\n\n  scrollPlayPauseVideo(){\n    const checkArticleAnimationDone = () => {\n      // if(!document.querySelector(\"main\").querySelector(\"section\").style.opacity < 1){\n        this.setVideoPositionDetails();\n      // } else {\n      //   setTimeout(() => {\n      //     articleAnimationDone();\n      //   },100);\n      // }\n    }\n\n    setTimeout(() => {\n      checkArticleAnimationDone();\n    },700)  \n  }\n\n  setVideoPositionDetails(){\n    this.player.videoBox = this.player.el.current.getBoundingClientRect();\n    this.player.videoTop = (checkWindow ? window.pageYOffset : 0) + this.player.videoBox.top;\n    this.player.videoBottom = this.player.videoTop + this.player.videoBox.height;\n\n    // if($(\"section\").hasClass(\"-firstLoad\")){\n    //   video.videoTop -= this.windowH * 0.2; // to account for the slideup if video loads beforehand\n    // }\n\n    this.player.scrollEvent = this.onScroll.bind(this);\n\n    if(checkWindow){\n      window.addEventListener(\"scroll\", this.player.scrollEvent);\n    }\n  }\n\n  checkIfVideoInView(){\n    let videoTopQuater = this.player.videoTop + (this.player.videoBox.height * 0.25),\n        videoBottomQuater = this.player.videoTop + (this.player.videoBox.height * 0.75);\n\n    if(this.screenTop > videoBottomQuater || this.screenBottom < videoTopQuater){\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  muteClicked(){\n    if(this.state.muted){\n      this.player.video.setVolume(1);\n      this.setState({\n        muted: false\n      })\n    } else {\n      this.player.video.setVolume(0);\n      this.setState({\n        muted: true\n      })\n    }\n  }\n\n  render() {\n    const player = this.player;\n    let iconColor = \"\";\n\n    if(player.soundIconColor === \"black\"){\n      iconColor = \"-dark\";\n    }\n\n    return (\n      <div ref={player.el} key={player.options.id} className={`${player.class} ${this.state.loading ? \"-loading\" : \"\"}`}>\n        {player.options.background !== true && (\n          <div \n            ref={player.muteBtn} \n            onClick={() => this.muteClicked()}\n            className={ `vimeo__mute ${iconColor} ${this.state.muted ? \"\" : \"-sound\"}` }\n          />\n        )}\n      </div>\n    );\n  }\n}"],"sourceRoot":""}