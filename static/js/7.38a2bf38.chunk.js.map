{"version":3,"sources":["redux/actions.js","components/TopToolbar.js","components/SplashPage.js","components/MapBoxEl.js","components/FloatingTextInput.js","components/SimpleSteps.js","components/Signup.js","components/Confirm.js","utils/createPdf.js","utils/uploadData.js","components/PepehaPortrait.js","components/SelectionMenu.js","components/PleaseUpdate.js","containers/CreatePepeha.js","../node_modules/pdfjs-dist/build sync"],"names":["toolbarChanged","payload","type","moveStepTo","addPepehaEntry","resetPepehaData","TopToolbar","steps","this","props","state","moveStep","simpleStep","prev","prevStep","currStep","addManually","buttonColor","burgerColor","bcgColor","mapDropdown","input","document","querySelector","value","dataNames","_this","Object","objectSpread","stageName","simpleSteps","MapBoxEl","explanationDone","explanationsShown","mapData","toConsumableArray","sort","a","b","textA","eng","toUpperCase","textB","react_default","createElement","className","concat","active","toolbarOpen","clickable","button","onClick","prevBtnClicked","x","y","viewBox","cx","cy","r","points","react_router_dom","to","x1","y1","x2","y2","Fragment","map","names","key","mapSelection","NavMob","Component","connect","dispatch","SplashPage","console","log","window","innerWidth","visible","burgerColr","setState","_this2","stage","resetExplanations","regionIcon","mountainIcon","waterIcon","jsonList","region","regionJSON","mountain","mountainJSON","water","waterJSON","iconList","mapBoxMarkers","currMarkerType","mapboxgl","accessToken","Map","container","style","center","zoom","on","addControl","NavigationControl","setPaintProperty","resizeMap","resize","bind","addEventListener","removeEventListener","forEach","marker","remove","addLocations","json","icon","_this3","dropdownNames","markerTemplate","infoBox","iconDiv","name","innerHTML","appendChild","i","el","cloneNode","nameEl","id","properties","setAttribute","natural","mapBoxMarker","Marker","setLngLat","geometry","coordinates","addTo","push","maori","length","markers","setTimeout","setMarkerEvents","_this4","querySelectorAll","mapZoom","root","documentElement","zoomVal","getZoom","limit","growth","fontSize","setProperty","markerSize","Math","pow","category","zoomTo","_this5","selected","FloatingTextInput","inputEl","React","createRef","isIos","deviceInfo","os","windowResize","vh","arguments","undefined","innerHeight","focused","entry","updatePepehaData","current","focus","e","which","keyCode","target","checkValidity","blur","stepPayload","setViewportHeightMobile","scrollIntoView","innerH","clientHeight","stepCount","required","ref","placeholder","onKeyUp","keyPressed","onChange","onFocus","onBlur","blurred","data-stage","SimpleSteps","firstName","questions","explanation","footer","keyEvent","onKeyPress","nextSimpleStep","explanationsArr","splice","explanations","title","para","charAt","substring","components_MapBoxEl","components_FloatingTextInput","backgroundColor","color","Signup","_ref","close","done","loading","formEl","submitEl","_useState","useState","_useState2","slicedToArray","formValid","validityChanged","checkedTruthy","inputChanged","valid","src","alt","data-id","onSubmit","preventDefault","click","htmlFor","data-radiochecked","checked","Number","getAttribute","toggleRadio","fullName","email","subscribed","href","rel","Confirm","open","openSignUp","pdfjs","GlobalWorkerOptions","workerSrc","version","splitIntoLines","text","frameTop","htmlToSvgHRatio","spans","lines","span","spanBounds","getBoundingClientRect","top","height","extractedText","innerText","line","replace","createJpg","pdfOutput","Promise","resolve","reject","getDocument","data","promise","then","pdf","getPage","page","viewport","getViewport","canvas","context","getContext","width","renderContext","canvasContext","render","imgSrc","toDataURL","catch","err","uploadData","userData","portraitData","axios","method","url","timeout","headers","Content-Type","pdfString","btoa","jpgString","img","split","response","dialogAction","fulfillmentState","postPortrait","splitLocation","message","content","pdfId","pdfName","cookie","device","detect","jpg","browser","browserVersion","userAgent","navigator","postUserData","trackLines","PepehaTextLine","self","_ref$visible","sentences","_ref$simple","simple","textSizes","dangerouslySetInnerHTML","__html","splitIntoSpans","PepehaPortrait","pepehaData","pepehaStyles","containerScale","theme","previewIsClosed","showFinBtn","ios","isSafari","confirmActive","signUpActive","portraitReady","settings","paperRatio","engEm","maoriEm","maxWRatio","maxHRatio","previewTiming","preview","zoomIcon","cornerClose","confirm","instagramMinFontSize","previewBox","emSize","newEmSize","emDiff","defaultScale","transform","maxWidth","toFixed","resizeEvent","onResize","orientationEvent","onOrientationChange","bodyClicked","windowW","windowH","isDektop","setSizesForPortraitPreview","delay","zoomIn","changed","dataCount","keys","filter","scaleSvgPreview","maoriText","frameW","round","offsetWidth","initialPepehaW","initialPepehaH","offsetHeight","frameH","scale","fillWidth","string","words","word","spanString","preZoomTransform","nativeEvent","offsetX","offsetY","scaledDimensions","coOrdsPercent","scaleSize","previewClickPos","checkMaxWidth","pepehaPortrait","scrollTop","scrollLeft","classList","toggle","zoomIconWidth","_this6","zoomIconMoving","TweenLite","opacity","ease","Sine","easeIn","onComplete","add","_this7","_this8","jsPDF","events","addFileToVFS","base64Fonts","pepehaBase64","addFont","andSansBase64","svgMaoriFontsize","svgEngFontsize","pepehaPDF","format","previewBounds","htmlMaori","htmlEng","htmlMaoriFontsize","htmlEngFontsize","colors","setTextColor","setFillColor","setDrawColor","rect","setFont","setFontSize","letterSpacing","extraSpacingFromLetterSpacing","a3W","align","charSpace","output","targetClass","checkConfirm","indexOf","checkSignup","checkOpenButton","closest","_this9","react_router","openFinishedWindow","d","onMouseEnter","previewMouseEnter","onMouseMove","previewMouseMove","onMouseLeave","previewMouseLeave","data-html2canvas-ignore","PepehaPortrait_PepehaTextLine","item","components_Confirm","closeFinishedWindow","openSignup","components_Signup","closeSignup","uploadPortraitAndData","SelectionMenu","enterText","previewing","toggleEntryVisibility","itemClicked","enterPlaceholder","toggleItem","previewClicked","PleaseUpdate","CreatePepeha","OS","readyState","onLoad","setVH","stepChange","resetPosition","components_TopToolbar","components_SplashPage","components_SimpleSteps","components_PepehaPortrait","components_SelectionMenu","PleaseUpdate_PleaseUpdate","webpackEmptyContext","req","Error","code","module","exports"],"mappings":"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","file":"static/js/7.38a2bf38.chunk.js","sourcesContent":["export function toolbarChanged(payload){\n  return { type: \"CHANGE_TOOLBAR\", payload };\n}\n\n\nexport function moveStepTo(payload){\n  return { type: \"MOVE_TO\", payload };\n}\n\nexport function moveStepBack(payload){\n  return { type: \"MOVE_BACKWARD\", payload };\n}\n\nexport function resetExplanations(payload){\n  return { type: \"RESET_EXPLANATIONS\", payload };\n}\n\nexport function resetPosition(payload){\n  return { type: \"RESET_POSITION\", payload };\n}\n\n\nexport function addPepehaEntry(payload){\n  return { type: \"ADD_PEPEHA_ENTRY\", payload };\n}\n\nexport function changePepehaEntry(payload){\n  return { type: \"CHANGE_PEPEHA_ENTRY\", payload };\n}\n\nexport function toggleEntryVisibility(payload){\n  return { type: \"TOGGLE_ENTRY_VISIBILITY\", payload };\n}\n\nexport function resetPepehaData(payload){\n  return { type: \"RESET_DATA\", payload };\n}","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { Link } from 'react-router-dom';\n\nimport { moveStepTo, toolbarChanged } from \"../redux/actions\";\n\nimport NavMob from '../components/NavMob';\n\nimport '../styles/_topToolbar.scss';\n\nconst mapStateToProps = state => {\n  return { state: state };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    moveStepTo: payload => dispatch(moveStepTo(payload)),\n    toolbarChanged: payload => dispatch(toolbarChanged(payload))\n  };\n}\n\nclass TopToolbar extends Component {\n  prevBtnClicked(){\n    const steps = this.props.state.moveStep;\n\n    let simpleStep = steps.simpleStep,\n        prev = steps.prevStep;\n\n    if(simpleStep !== 0){ // if not splash or advanced\n      if(steps.currStep === \"SimpleSteps\"){\n        simpleStep -= 1;\n      } else if(steps.currStep === \"PepehaPortrait\"){\n        simpleStep = 4;\n      }\n    } else {\n      if(prev !== \"SelectionMenu\"){\n        prev = \"SplashPage\";\n      } else {\n        this.props.moveStepTo({prevStep: \"SplashPage\"});\n      } \n    }\n\n    if(steps.addManually === true){\n      this.props.moveStepTo({addManually: false});\n      this.props.toolbarChanged({buttonColor: 'white', burgerColor: 'white', bcgColor: 'black', mapDropdown: true});\n    } else {\n      this.props.moveStepTo({currStep: prev, simpleStep: simpleStep});\n    }\n\n    this.input = document.querySelector(\".floatingTextInput-input\");\n\n    if(this.input !== null) this.input.value = \"\";\n  }\n\n  nameClicked(dataNames){\n      // let names = JSON.parse($(this).attr(\"data-names\")),\n      //     water = false;\n\n      //       self.selectedName = {};\n      //       self.selectedName.eng = names.eng;\n\n      //       if($(this).attr(\"data-water\")){\n      //         water = $(this).attr(\"data-water\");\n      //         self.selectedName.water = water;\n      //       }\n\n      //       if(names.maori){\n      //         self.selectedName.maori = names.maori;\n      //       } else {\n      //         self.selectedName.maori = false;\n      //       }\n\n      //       $(\".simpleToolbar\").removeClass(\"-open\");\n      //       $(\".simpleToolbar-close\").removeClass(\"-active\");\n      //       $(\".simpleBack\").addClass(\"-active\");\n      //       // self.selectionConfirmButtonClicked();\n\n      //       if(self.stagesCompleted[self.currStage]){\n      //         $(`.-${self.currStageName}.-selected`).removeClass(\"-selected\");\n      //       }\n\n      //       $(\"#map\").addClass(\"-fade\");\n\n      //       $(\".selectionConfirm-text\").html(names.eng);\n      //       setTimeout(() => { // hotfix, for map click off\n      //         $(\".selectionConfirm\").addClass(\"-active\");\n      //       },200)\n  }\n\n  render() {\n    const state = this.props.state,\n          toolbarChanged = state.toolbarChanged,\n          steps = {...state.moveStep},\n          stageName = steps.simpleSteps[steps.simpleStep] && steps.simpleSteps[steps.simpleStep].MapBoxEl,\n          explanationDone = steps.explanationsShown[steps.simpleStep];\n\n    let mapData = false;\n\n    if(steps.mapData){\n      mapData = [...steps.mapData].sort(function(a, b) {\n        let textA = a.eng.toUpperCase();\n        let textB = b.eng.toUpperCase();\n        return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;\n      });\n    }\n\n    return (\n      <section className={`\n        topToolbar \n        ${toolbarChanged.active === true && \"-active\"} \n        -burger-${toolbarChanged.burgerColor}\n        -bcg-${toolbarChanged.bcgColor}\n        ${toolbarChanged.toolbarOpen === true && \"-open\"}\n        ${toolbarChanged.clickable === false && \"-unclickable\"}\n      `}>\n        <svg \n          className={`topToolbar-back ${toolbarChanged.button === \"back\" && \"-active\"} -${toolbarChanged.buttonColor}`} \n          onClick={() => this.prevBtnClicked()}\n          x=\"0px\" y=\"0px\" viewBox=\"0 0 40.6 40.6\"\n        >\n          <circle className=\"cls-1\" cx=\"20.3\" cy=\"20.3\" r=\"19.5\"></circle>\n          <polyline className=\"cls-1\" points=\"24.1,28.1 16.5,20.3 24.1,12.7\"></polyline>\n        </svg>\n\n        <Link to={state.moveStep.prevStep === null ? '/' : ''}>\n          <svg \n            className={`topToolbar-close ${toolbarChanged.button === \"close\" && \"-active\"}`} \n            onClick={() => this.prevBtnClicked()}\n            viewBox=\"0 0 40.58 40.58\"\n          >\n            <circle className=\"cls-1\" cx=\"20.29\" cy=\"20.29\" r=\"19.5\"></circle>\n            <line className=\"cls-1\" x1=\"28.01\" y1=\"12.57\" x2=\"12.57\" y2=\"28.01\"></line>\n            <line className=\"cls-1\" x1=\"12.57\" y1=\"12.57\" x2=\"28.01\" y2=\"28.01\"></line>\n          </svg>\n        </Link>\n\n        {mapData !== false && toolbarChanged.mapDropdown && explanationDone ? (\n          <React.Fragment>\n            {/* simpleToolbar */}\n            <div className=\"topToolbar-selection\" onClick={() => {\n              this.props.toolbarChanged({toolbarOpen: !toolbarChanged.toolbarOpen})}\n            }>\n              <p className=\"topToolbar-selection-text\">{\"Select \"+stageName}</p>\n              <svg className=\"topToolbar-selection-chevron\" viewBox=\"0 0 98.99 53.03\"><g><polyline className=\"cls-1\" points=\"97.2,2.8 49.5,50.5 1.8,2.8\"/></g></svg>\n            </div>\n\n            <ul className=\"topToolbar-list\">\n              {mapData.map(names => {\n                return(\n                  <li \n                    key={names.eng}\n                    className=\"topToolbar-list-item\"\n                    onClick={() => {\n                      this.props.moveStepTo({mapSelection: names});\n                      this.props.toolbarChanged({toolbarOpen: !toolbarChanged.toolbarOpen});\n                    }}\n                  >{names.eng}</li>\n                )\n              })}\n            </ul>\n            <p \n              className=\"topToolbar-cantFind\"\n              onClick={() => {\n                this.props.toolbarChanged({toolbarOpen: !toolbarChanged.toolbarOpen});\n                this.props.moveStepTo({addManually: true});\n              }}\n            >{`Can't find your ${stageName}?`}</p>\n          </React.Fragment>\n        ) : null}\n\n        <NavMob/>\n      </section>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TopToolbar);","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { moveStepTo, toolbarChanged, resetPepehaData, resetExplanations } from \"../redux/actions\";\n\nimport '../styles/_splashPage.scss';\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    moveStepTo: payload => dispatch(moveStepTo(payload)),\n    toolbarChanged: payload => dispatch(toolbarChanged(payload)),\n    resetPepehaData: payload => dispatch(resetPepehaData(payload)),\n    resetExplanations: payload => dispatch(resetExplanations(payload)),\n  };\n}\n\nclass SplashPage extends Component{\n  state = {\n    active: false\n  }\n\n  componentDidMount(){\n    console.log('window.innerWidth',window.innerWidth);\n    \n  }\n\n  componentDidUpdate(){\n    if(this.state.active !== this.props.visible){\n      let burgerColr = 'black';\n\n      if(window.innerWidth <= 1024) burgerColr = 'white';\n\n      if(this.props.visible === true){\n        this.props.toolbarChanged({buttonColor: 'white', button: 'close', burgerColor: burgerColr})\n      }\n\n      this.setState({\n        active: !this.state.active \n      })\n    }\n  }\n\n  // Previously simpleadvanced\n  render() {\n    return (\n      <section className={`splashPage ${this.state.active ? '-active' : ''}`}>\n        <div className=\"splashPage-container\">\n          <div \n            className=\"splashPage-advanced\" \n            onClick={() => {\n              this.props.moveStepTo({stage: 'advanced', currStep: 'SelectionMenu', prevStep: 'SplashPage'})\n              this.props.toolbarChanged({burgerColor: 'white', button: 'back'})\n            }}\n          >\n            <h3 className=\"splashPage-advanced-heading\">I Know<br/>My Pepeha</h3>\n            <p className=\"splashPage-advanced-description -para1\">Choose this option for those who can easily write their own Pepeha.</p>\n          </div>\n          <div \n            className=\"splashPage-simple\"\n            onClick={() => {\n              this.props.moveStepTo({stage: 'simple', currStep: 'SimpleSteps', prevStep: 'SplashPage'})\n              this.props.toolbarChanged({buttonColor: 'black', button: 'back', burgerColor: 'black'})\n              this.props.resetPepehaData()\n              this.props.resetExplanations()\n            }}\n          >\n            <h3 className=\"splashPage-simple-heading\">Learn your<br/>Pepeha</h3>\n            <p className=\"splashPage-simple-description -para1\">Choose this option for those who need help to create their own Pepeha.</p>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(SplashPage);","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\n\nimport { moveStepTo, toolbarChanged, addPepehaEntry } from \"../redux/actions\";\n\nimport mapboxgl from 'mapbox-gl';\n\nimport '../styles/_map.scss';\n\nimport regionJSON from '../json/regions.json';\nimport mountainJSON from '../json/mountains.json';\nimport waterJSON from '../json/waters.json';\n// import { thisTypeAnnotation } from '@babel/types';\n\nconst mapStateToProps = state => {\n  return { state: state };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    moveStepTo: payload => dispatch(moveStepTo(payload)),\n    toolbarChanged: payload => dispatch(toolbarChanged(payload)),\n    addPepehaEntry: payload => dispatch(addPepehaEntry(payload)),\n  };\n}\n\nclass MapBoxEl extends Component {\n  state = {\n    active: false,\n  }\n\n  map;\n\n  regionIcon = `<svg x=\"0px\" y=\"0px\" viewBox=\"0 0 120.4 118.7\" style=\"enable-background:new 0 0 120.4 118.7;\" xml:space=\"preserve\"><path class=\"cls-1\" d=\"M118.2,59.7L59.9,1.4L2.2,59l0,0l0,0l58.3,58.3L118.2,59.7L118.2,59.7L118.2,59.7z M60.5,109.1L16.4,65l87.8,0.5L60.5,109.1\n    z\"/></svg>`;\n\n  mountainIcon = `<svg id=\"Isolation_Mode\" data-name=\"Isolation Mode\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 120.41 73.74\"><polygon class=\"cls-1\" points=\"14.83 67.14 59.87 22.1 105.42 67.65 14.83 67.14\"/><path class=\"cls-2\" d=\"M59.87,30.6,90.82,61.55l-61.55-.34L59.87,30.6m0-17L.38,73.08,120,73.74,59.87,13.59Z\"/></svg>`;\n\n  waterIcon = `<svg id=\"Isolation_Mode\" data-name=\"Isolation Mode\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 120.41 73.74\"><path class=\"cls-1\" d=\"M58.87,68.46A24.49,24.49,0,1,1,83.36,44,24.52,24.52,0,0,1,58.87,68.46Z\"/><path class=\"cls-2\" d=\"M58.87,24.77A19.2,19.2,0,1,1,39.67,44a19.22,19.22,0,0,1,19.2-19.2m0-10.57A29.77,29.77,0,1,0,88.65,44,29.77,29.77,0,0,0,58.87,14.2Z\"/></svg>`;\n\n  jsonList = {\n    region: regionJSON,\n    mountain: mountainJSON,\n    water: waterJSON\n  };\n  \n  iconList = {\n    region: this.regionIcon,\n    mountain: this.mountainIcon,\n    water: this.waterIcon\n  };\n\n  mapBoxMarkers = [];\n  currMarkerType = false;\n\n  componentDidMount(){\n    mapboxgl.accessToken = 'pk.eyJ1IjoiaGFtaXNoZHciLCJhIjoiY2pjcXo1M3F3MDRxZTMybnExeGpkZzdoYyJ9.I-j4YbF2mmPI3Xvzw6ZK4g';\n\n    this.map = new mapboxgl.Map({\n        container: 'map',\n        style: 'mapbox://styles/hamishdw/cjkag7nws1txj2snsiguqlc7w',\n        center: [174.160873, -40.842404],\n        zoom: 5.3\n    });\n\n    this.map.on(\"load\", () => {\n      this.map.addControl(new mapboxgl.NavigationControl());\n\n      this.map.setPaintProperty('water', 'fill-color', '#ffffff');\n      this.map.setPaintProperty('background', 'background-color', '#dddddd');\n      this.map.setPaintProperty('ne-10m-admin-1-states-provinc-9d4nfc', 'line-color', '#c2c2c2');\n\n      this.resizeMap = this.map.resize.bind(this);\n\n      window.addEventListener('resize', this.resizeMap);\n    })\n  }\n\n  componentWillUnmount(){\n    window.removeEventListener(\"resize\", this.resizeMap);\n  }\n\n  componentDidUpdate(){\n    const steps = {...this.props.state.moveStep},\n          stageName = steps.simpleSteps[steps.simpleStep].MapBoxEl;\n\n    if(this.state.active !== this.props.visible){\n      this.setState({\n        active: !this.state.active \n      })\n\n      if(this.props.visible === true){\n        this.props.toolbarChanged({buttonColor: 'white', burgerColor: 'white', bcgColor: 'black', mapDropdown: true});\n      } else {\n        this.props.toolbarChanged({buttonColor: 'black', burgerColor: 'black', bcgColor: 'transparent', mapDropdown: true});\n      }\n    }\n\n    if(this.props.visible === true && stageName !== this.currMarkerType){\n      this.props.toolbarChanged({buttonColor: 'white', burgerColor: 'white', bcgColor: 'black', mapDropdown: true});\n      this.currMarkerType = stageName;\n      this.mapBoxMarkers.forEach(marker => marker.remove());\n      this.addLocations(this.jsonList[stageName], this.iconList[stageName]);\n    }\n  }\n\n  addLocations(json,icon) {\n    const currStep = this.props.state.moveStep.simpleStep;\n\n    let dropdownNames = [],\n        markerTemplate = document.createElement(\"div\"),\n        infoBox = document.createElement(\"div\"),\n        iconDiv = document.createElement(\"div\"),\n        name = document.createElement(\"p\");\n\n    markerTemplate.className = `mapBox-marker -step-${currStep}`;\n\n    infoBox.className = \"mapBox-marker-info\";\n\n    iconDiv.className = \"mapBox-marker-icon\";\n    iconDiv.innerHTML = icon;\n    \n    name.className = \"mapBox-marker-name\";\n\n    infoBox.appendChild(name);\n    markerTemplate.appendChild(infoBox);\n    markerTemplate.appendChild(iconDiv);\n\n    this.mapBoxMarkers = [];\n\n    json.forEach((marker, i) => {\n      let el = markerTemplate.cloneNode(true),\n          nameEl = el.querySelector(\".mapBox-marker-name\");\n\n      el.id = 'marker-'+i;\n      nameEl.innerHTML = marker.properties.name;\n\n      if(marker.properties[\"name:mi\"]){\n        nameEl.setAttribute(\"data-maori\", marker.properties[\"name:mi\"]);\n      } else {\n        nameEl.setAttribute(\"data-maori\", false);\n      }\n\n      // 4 === water\n      if(currStep === 4 && marker.properties.natural){\n        name.setAttribute(\"data-water\", marker.properties.natural);\n      }\n\n      const mapBoxMarker = new mapboxgl.Marker(el)\n          .setLngLat([marker.geometry.coordinates[0], marker.geometry.coordinates[1]])\n          .addTo(this.map);\n\n      this.mapBoxMarkers.push(mapBoxMarker);\n\n      dropdownNames.push({\n        \"eng\": marker.properties.name,\n        \"maori\": marker.properties[\"name:mi\"]\n      })\n\n      if(currStep === 4  && marker.properties.natural){\n        dropdownNames[dropdownNames.length - 1].water = marker.properties.natural;\n      }\n    });\n\n    this.setState({\n      markers: true\n    })\n\n    this.props.moveStepTo({mapData: dropdownNames});\n\n    setTimeout(() => {\n      this.setMarkerEvents();\n    },1000) // wait for preloader\n  }\n\n  setMarkerEvents(){\n    this.markers = document.querySelectorAll(\".mapBox-marker\");\n\n    // do this earlier, now that css vars used??\n    this.mapZoom();\n    this.map.on('zoom', () => {\n      this.mapZoom();\n    });\n\n    this.map.on('mouseup', () => this.props.moveStepTo({mapSelection: false}));\n\n    this.markers.forEach((marker, i) => {\n      marker.addEventListener(\"click\", () => {\n        this.props.moveStepTo({mapSelection: this.props.state.moveStep.mapData[i]});\n      })\n    })\n  }\n\n  mapZoom(){\n    const root = document.documentElement;\n\n    let zoomVal = this.map.getZoom(),\n        limit = 6;\n\n    if(this.props.state.moveStep.simpleStep === 2){\n      limit = 4;\n    }\n\n    if(zoomVal > limit){\n      this.setState({\n        names: true\n      })\n\n      let growth = 3;\n\n      if(this.props.state.moveStep.simpleStep === 2){\n        growth = 4.5;\n      }\n\n      let fontSize = (zoomVal * growth) - 18; // needs some tweaking\n\n      root.style.setProperty('--markerInfo', fontSize+\"px\");\n    } else if(this.state.names === true){\n      this.setState({\n        names: false\n      })\n    }\n\n    let markerSize = (Math.pow(zoomVal, 2)); // needs some tweaking\n\n    root.style.setProperty('--markerWidth', markerSize+\"px\");\n    root.style.setProperty('--markerHeight', (markerSize * 0.333)+\"px\");\n  }\n\n  selected(){\n    const steps = {...this.props.state.moveStep},\n          stageName = steps.simpleSteps[steps.simpleStep].MapBoxEl,\n          mapSelection = steps.mapSelection;\n\n    this.props.addPepehaEntry({category: stageName, value: mapSelection, visible: true});\n    this.props.moveStepTo({simpleStep: steps.simpleStep + 1, prevStep: \"SimpleSteps\", mapSelection: false});\n\n    if(steps.simpleStep === 4){\n      this.props.moveStepTo({currStep: \"PepehaPortrait\"});\n      this.props.toolbarChanged({buttonColor: 'black', burgerColor: 'black', bcgColor: 'transparent', mapDropdown: false});\n    }\n\n    this.map.zoomTo(8, 700);\n  }\n\n  render() {\n    const mapSelection = this.props.state.moveStep.mapSelection;\n\n    return (\n      <section className={`\n        mapBox\n        ${this.state.active ? '-active' : ''}\n        ${this.state.markers ? '-markersActive' : ''}\n        ${this.state.names ? '-namesActive' : ''}\n      `}>\n        <div id=\"map\" className={`${mapSelection ? \"-fade\" : \"\"}`}/>\n\n        <div className={`mapBox-selectionConfirm ${mapSelection ? \"-active\" : \"\"}`}>\n          <p className=\"mapBox-selectionConfirm-text\">{mapSelection ? mapSelection.eng : \"\"}</p>\n          <p className=\"mapBox-selectionConfirm-button -nextText\" onClick={(() => this.selected())}>\n            <span>Next</span>\n          </p>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MapBoxEl);","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\n\nimport { moveStepTo, addPepehaEntry, toolbarChanged } from \"../redux/actions\";\n\nimport '../styles/_floatingTextInput.scss';\n\nconst mapStateToProps = state => {\n  return { state: state };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    moveStepTo: payload => dispatch(moveStepTo(payload)),\n    addPepehaEntry: payload => dispatch(addPepehaEntry(payload)),\n    toolbarChanged: payload => dispatch(toolbarChanged(payload))\n  };\n}\n\nclass FloatingTextInput extends Component {\n  state = {\n    active: false\n  }\n\n  inputEl = React.createRef();\n  prevStep = 0;\n  isIos = false;\n\n  componentDidMount(){\n    if(this.props.state.deviceInfo.os === \"iOS\"){\n      this.isIos = true;\n    } else {\n      window.addEventListener(\"resize\", () => this.windowResize());\n    }\n  }\n\n  setViewportHeightMobile(innerH = window.innerHeight){\n    let vh = innerH * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  }\n\n  componentDidUpdate(){\n    if(this.state.active !== this.props.visible){\n      this.setState({\n        active: !this.state.active \n      })\n\n      if(this.props.visible === true){\n        this.focused();\n\n        const entry = this.props.category ? this.props.state.updatePepehaData[this.props.category].entry : undefined;\n\n        if(entry !== undefined){\n          this.setState({\n            value: entry.eng\n          })\n        } else {\n          this.setState({\n            value: ''\n          })\n        }\n\n        this.inputEl.current.focus();\n\n        if(this.props.state.moveStep.stage === \"simple\"){\n          this.props.toolbarChanged({buttonColor: 'black', burgerColor: 'black', bcgColor: 'transparent', mapDropdown: false});\n        }\n      }\n    }\n\n    const currStep = this.props.state.moveStep.simpleStep;\n\n    if(currStep !== this.prevStep && this.props.visible === true){\n      this.prevStep = currStep;\n\n      const entry = this.props.category ? this.props.state.updatePepehaData[this.props.category].entry : undefined;\n\n      if(entry !== undefined){\n        this.setState({\n          value: entry.eng\n        })\n\n        this.inputEl.current.focus();\n      }\n\n      // setTimeout(() => {\n      //   console.log('entry',entry);\n      //   console.log('this.state.value',this.state.value);\n      // }, 1000)\n    }\n  }\n\n  keyPressed(e){\n    if((e.which === 13 || e.keyCode === 13) && e.target.checkValidity()){\n      this.addPepehaEntry(e);\n    }\n  }\n\n  addPepehaEntry(e){\n    e.target.blur();\n\n    const steps = this.props.state.moveStep;\n          \n    this.props.addPepehaEntry({category: this.props.category, value: {eng: this.state.value, maori: false}, visible: true});\n\n    let stepPayload = { addManually: false }\n\n    if(steps.stage === \"simple\"){\n      if(steps.simpleStep === 4){\n        stepPayload = { ...stepPayload, simpleStep: steps.simpleStep + 1, prevStep: \"SimpleSteps\", currStep: \"PepehaPortrait\"}\n        this.props.toolbarChanged({buttonColor: 'black', burgerColor: 'black', bcgColor: 'transparent', mapDropdown: false});\n      } else {\n        stepPayload = { ...stepPayload, simpleStep: steps.simpleStep + 1, prevStep: \"SimpleSteps\"}\n      }\n    }\n\n    this.props.moveStepTo( stepPayload );\n\n    // this.inputEl.current.blur();\n  }\n\n  windowResize(){\n    // if(!this.state.active) return;\n\n    this.setViewportHeightMobile();\n  }\n\n  focused(){\n    this.inputEl.current.scrollIntoView();\n\n    setTimeout(() => {\n      if(this.isIos){\n        let innerH = document.documentElement.clientHeight * 0.5\n        this.setViewportHeightMobile(innerH);\n      }\n    }, 100)\n  }\n\n  blurred(){\n    setTimeout(() => {\n      if(this.isIos){\n        this.setViewportHeightMobile();\n      }\n    }, 100)\n  }\n  \n  // Previously selectionOverlay\n  render() {\n    const stepCount = this.props.state.moveStep.simpleStep;\n\n    return (\n      <section className={`floatingTextInput ${this.state.active ? '-active' : ''}`}>\n        <p className={`floatingTextInput-macrons ${stepCount > 1 ? '-active' : ''}`}>Don't forget your macrons. To activate your macrons, hold down the vowel key and a set of macrons will appear.</p>\n\n        <div className=\"floatingTextInput-container\">\n          <input \n            type=\"text\" className=\"floatingTextInput-input\" required\n            ref={this.inputEl}\n            placeholder={this.props.placeholder}\n            onKeyUp={e => this.keyPressed(e)}\n            onChange={e => this.setState({value: e.target.value})}\n            value={this.state.value}\n            onFocus={() => this.focused()}\n            onBlur={() => this.blurred()}\n          />\n          <div className=\"floatingTextInput-input-dummyCursor\"></div>\n\n          <p className=\"floatingTextInput-button nextButton -nextText\" onClick={e => this.addPepehaEntry(e)} data-stage=\"\">\n            <span>Next</span>\n          </p>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FloatingTextInput);","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\n\nimport { moveStepTo, toolbarChanged } from \"../redux/actions\";\n\nimport '../styles/_simpleSteps.scss';\n\nimport MapBoxEl from '../components/MapBoxEl';\nimport FloatingTextInput from '../components/FloatingTextInput';\n\nconst mapStateToProps = state => {\n  return { state: state };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    moveStepTo: payload => dispatch(moveStepTo(payload)),\n    toolbarChanged: payload => dispatch(toolbarChanged(payload))\n  };\n}\n\nclass SimpleSteps extends Component {\n  state = {\n    active: true,\n    firstName: ''\n  }\n\n  questions = React.createRef();\n  explanation = React.createRef();\n  footer = React.createRef();\n\n  componentWillMount(){\n    this.setState({\n      steps: this.props.state.moveStep\n    })\n\n    this.keyEvent = this.onKeyPress.bind(this);\n\n    window.addEventListener(\"keypress\", this.keyEvent)\n  }\n\n  componentWillUnmount(){\n    window.removeEventListener(\"keypress\", this.keyEvent);\n  }\n\n  componentDidMount(){\n    this.setState({\n      active: true\n    })\n\n    this.props.toolbarChanged({bcgColor: 'transparent'});\n  }\n\n  onKeyPress(e){\n    let explanationDone = this.state.steps.explanationsShown[this.state.steps.simpleStep];\n    if(e.which === 13 || e.keyCode === 13){\n      if(this.state.active === true && explanationDone === false) this.nextSimpleStep();\n    }\n  }\n\n  componentDidUpdate(){\n    // if(this.state.active !== this.props.visible){\n    //   this.setState({\n    //     active: !this.state.active \n    //   })\n\n    //   if(this.props.visible === true){\n    //     this.props.toolbarChanged({buttonColor: 'black', burgerColor: 'black', bcgColor: 'transparent'});\n\n    //     // console.log('this.props.state',this.props.state);\n    //     // this.firstName = this.props.state\n    //   }\n    // }\n\n    const steps = this.props.state.moveStep;\n\n    if(\n      this.state.steps.simpleStep !== steps.simpleStep\n      ||\n      this.state.steps.explanationsShown[this.state.steps.simpleStep] !== steps.explanationsShown[this.state.steps.simpleStep]\n    ){\n      this.setState({\n        steps: steps\n      })\n    }\n  }\n\n  nextSimpleStep(){\n    const steps = this.state.steps,\n          explanationDone = steps.explanationsShown[this.state.steps.simpleStep];\n\n    if(explanationDone === false){\n      let explanationsArr = steps.explanationsShown;\n      \n      explanationsArr.splice(steps.simpleStep, 1, true);\n\n      this.props.moveStepTo({\n        explanationsShown: explanationsArr\n      })\n    } else {\n      let prevStep = steps.prevStep;\n\n      if(steps.simpleStep !== 0) prevStep = \"simpleSteps\";\n\n      this.props.moveStepTo({\n        simpleStep: steps.simpleStep + 1,\n        prevStep: prevStep\n      })\n    }\n\n    let firstName = this.props.state.updatePepehaData.name.entry;\n\n    if(firstName !== undefined && firstName.eng !== this.state.firstName) this.setState({firstName: firstName.eng});\n  }\n\n  render() {\n    const steps = this.state.steps,\n          currStep = steps.simpleStep;\n\n    const explanationDone = steps.explanationsShown[currStep],\n          category = steps.simpleSteps[currStep].FloatingTextInput !== undefined ? steps.simpleSteps[currStep].FloatingTextInput : steps.simpleSteps[currStep].MapBoxEl,\n          explanations = [\n            {title: \"Ingoa\", para: \"Ingoa means name, what is your name?\"},\n            {title: \"Whnau\", para: \"Whnau means family, what is your family name?\"},\n            // Capitalise First name\n            {title: \"N hea koe?\", para: `Where are you from ${this.state.firstName.charAt(0).toUpperCase() + this.state.firstName.substring(1)}?`, explanation: \"region\"},\n            {title: \"Maunga\", para: \"A Maunga is a mountain that is special to you or one that you have lived by.\", explanation: \"mountain\"},\n            {title: \"Awa  Roto  Moana\", para: \"An Awa, Roto or Moana is a body of water that is special to you or one that you have lived by.\", explanation: \"awa, roto or moana\"},\n          ];\n\n    return (\n      <section className={`simpleSteps ${this.state.active ? '-active' : ''}`}>\n        {/* prev simpleExplanation */}\n        <div ref={this.explanation} className={`simpleSteps-explanation ${explanationDone !== \"false\" && \"-active\"}`}>\n          <p className=\"simpleSteps-explanation-title\">{explanations[currStep].title}</p>\n          <p className=\"simpleSteps-explanation-text -para1\">{explanations[currStep].para}</p>\n          <p className={`simpleSteps-explanation-helpUs ${steps.simpleStep > 1 && \"-active\"}`}><b>Help us!</b> If your {explanations[currStep].explanation} isn't marked on the map provided, add it manually so we can build our&nbsp;database.</p>\n          <p className=\"simpleSteps-explanation-next -nextText\" onClick={() => this.nextSimpleStep()}><span>Next</span></p>\n        </div>\n\n        <MapBoxEl visible={explanationDone === true && steps.simpleStep >= 2 ? true : false}/>\n        \n        <FloatingTextInput \n          visible={\n            (explanationDone === true && steps.simpleStep < 2) \n            || \n            this.props.state.moveStep.addManually\n          }\n          category={category ? category : ''}\n          placeholder={\n            category === \"name\" ? \"first name\" : \n            category === \"family\" ? \"family name\" : \n            category ? category : ''}\n        />\n\n        {/* prev simpleFooter */}\n        <div ref={this.footer} className=\"simpleSteps-footer -active\" style={{backgroundColor: this.props.state.toolbarChanged.bcgColor}}>\n          <div className=\"simpleSteps-footer-contain\">\n            <p className=\"simpleSteps-footer-progress\" style={{color: this.props.state.toolbarChanged.buttonColor}}>\n              STEP {steps.simpleStep + 1} / 5\n            </p>\n            <p \n              className={`simpleSteps-footer-cantFind ${this.props.state.toolbarChanged.mapDropdown ? \"-active\" : ''}`}\n              onClick={() => this.props.moveStepTo({addManually: true, mapSelection: false})}\n            >Add manually</p>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SimpleSteps);","import React, { useState } from 'react';\n\nconst Signup = ({active, close, done, loading}) => {\n  const formEl = React.createRef(),\n        submitEl = React.createRef();\n\n  const [formValid, validityChanged] = useState(0);\n\n  let checkedTruthy = false;\n\n  const toggleRadio = e => {\n    e.preventDefault();\n\n    let checked = 1 - Number(e.target.getAttribute(\"data-radiochecked\"));\n\n    checkedTruthy = checked === 1 ? true : false;\n\n    e.target.setAttribute(\"data-radiochecked\", checked);\n\n    if(checked){\n      e.target.checked = true;\n    } else {\n      e.target.checked = false;\n    }\n  }\n\n  const inputChanged = e => {\n    const valid = formEl.current.checkValidity();\n    \n    validityChanged(valid);\n  }\n\n  return(\n    // previosly pepehaDownload\n    <div className={`pepehaPortrait-signup ${active ? \"-active\" : \"\"}`}>\n      <svg className=\"pepehaPortrait-signup-back\" x=\"0px\" y=\"0px\" viewBox=\"0 0 40.6 40.6\" onClick={() => close()}>\n        <circle className=\"st0\" cx=\"20.3\" cy=\"20.3\" r=\"19.5\"/>\n        <polyline className=\"st0\" points=\"24.1,28.1 16.5,20.3 24.1,12.7 \t\"/>\n      </svg>\n\n      <div className={`pepehaPortrait-signup-overlay ${loading ? \"-active\" : \"\"}`}>\n        <img src=\"./loading.gif\" alt=\"\" className=\"pepehaPortrait-signup-overlay-loading\"/>\n      </div>\n\n      <form \n        id=\"subForm\" \n        className=\"pepehaPortrait-signup-form js-cm-form\" \n        ref={formEl} data-id=\"A61C50BEC994754B1D79C5819EC1255C731DD779B1E59FBB65BE8BEACF7BB6824FD81C68318E5354E006E320B8323AF57370F028E283AA82CF1D188E46C73834\"\n        onSubmit={ e => {\n          e.preventDefault();\n          console.log('submitEl',submitEl);\n          submitEl.current.click();\n        }}\n      >\t\n        <p className=\"pepehaPortrait-signup-title\">Ka Rawe!</p>\n        <p className=\"pepehaPortrait-signup-text -para1\">Your Pepeha is ready.</p>\n        \n        <label htmlFor=\"fieldName\" className=\"pepehaPortrait-signup-label\">Full Name</label>\n        <input className=\"pepehaPortrait-signup-input -name\" id=\"fieldName\" name=\"cm-name\" type=\"text\" placeholder=\"full name\"  onChange={e => inputChanged(e)}/>\n    \n        <label htmlFor=\"fieldEmail\" className=\"pepehaPortrait-signup-label\">Email Address</label>\n        <input id=\"fieldEmail\" name=\"cm-whtkrl-whtkrl\" type=\"email\" className=\"js-cm-email-input pepehaPortrait-signup-input\" required  placeholder=\"email address\" onChange={e => inputChanged(e)}/>\n\n        <div className=\"pepehaPortrait-signup-optIn\">\n          <input type=\"radio\" id=\"cm-privacy-consent\" name=\"cm-privacy-consent\" data-radiochecked={\"0\"} className=\"pepehaPortrait-signup-optIn-radio\" onClick={e => toggleRadio(e)}/>\n          <label htmlFor=\"cm-privacy-consent\" className=\"pepehaPortrait-signup-radioLabel\">Opt in for pepeha updates</label>\n          <input id=\"fieldjdyhtju\" name=\"cm-f-jdyhtju\" type=\"text\" className=\"-hidden\" />\n        </div>\n\n        <input id=\"fieldjdjyiki\" name=\"cm-f-jdjyiki\" type=\"text\" className=\"-hidden\" />\n        <input id=\"fieldjdjyikd\" name=\"cm-f-jdjyikd\" type=\"text\" className=\"-hidden\" />\n\n        <p \n          ref={submitEl}\n          className={`pepehaPortrait-signup-button ${formValid ? \"-valid\" : \"\"}`} \n          onClick={() => done({\n            fullName: document.querySelector(\"#fieldName\").value,\n            email: document.querySelector(\"#fieldEmail\").value,\n            subscribed: checkedTruthy,\n          })}\n        >{loading ? \"LOADING\" : \"NEXT\"}</p>\n\n        <p className=\"pepehaPortrait-signup-agreeMessage agreeMessage\">By clicking next you agree to the <a className=\"pepehaPortrait-signup-agreeLink\" target=\"_blank\" href=\"https://shop.pepeha.nz/pages/terms-and-conditions\" rel=\"noopener noreferrer\">terms and conditions</a></p>\n        \n        <button className=\"pepehaPortrait-signup-confirm js-cm-submit-button\" type=\"submit\">Subscribe</button>\n      </form>\n    </div>\n  )\n}\n\nexport default Signup;","import React from 'react';\n\nconst Confirm = ({open, close, openSignUp}) => {\n  // previosuly confirmPanel\n  return(\n    <div className={`pepehaPortrait-confirm -fixed ${open ? \"-open\" : \"\"}`}>\n      <div className=\"pepehaPortrait-confirm-container\">\n        <div className=\"pepehaPortrait-confirm-background\"></div>\n\n        <div className=\"pepehaPortrait-confirm-content\">\n          <p className=\"pepehaPortrait-confirm-title\">Ka Pai!</p>\n          <p className=\"pepehaPortrait-confirm-paragraph -para1\">Before you proceed, make sure you are happy with all the spelling on your Pepeha, as these can't be changed once we have created your artwork.</p>\n          <p className=\"pepehaPortrait-confirm-button\" onClick={() => openSignUp()}>Proceed</p>\n          <p className=\"pepehaPortrait-confirm-openClose\" onClick={() => close()}>Take me back</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Confirm;","import * as jsPDF from 'jspdf'\nimport base64Fonts from './base64Fonts.json';\n// import pdfjsLib from \"pdfjs-dist/build/pdf\";\nimport { pdfjs } from 'react-pdf';\n\n// const pdfSWLocation = (window.location.hostname === \"localhost\" || window.location.hostname !== \"192.168.0.123\") ? `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js` : window.location.origin + `/pdf.worker.js`;\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nexport default function createPdf(self){\n  return new Promise((resolve, reject) => {\n    let a3W = 297,\n        a3H = 420;\n\n    const callAddFont = function(){\n      this.addFileToVFS('PepehaDisplay.ttf', base64Fonts.pepehaBase64);\n      this.addFont('PepehaDisplay.ttf', 'PepehaDisplay', 'normal');\n\n      this.addFileToVFS('AndSansRegular.ttf', base64Fonts.andSansBase64);\n      this.addFont('AndSansRegular.ttf', 'AndSansRegular', 'normal');\n    };\n\n    jsPDF.API.events.push(['addFonts', callAddFont]);\n\n    const mmToPoint = 0.352778;\n\n    const pepehaPDF = new jsPDF({\n      format: [a3W / mmToPoint, a3H / mmToPoint]\n    });\n\n    const previewBounds = self.el.preview.current.getBoundingClientRect();\n\n    let frameW = self.el.preview.current.offsetWidth / self.defaultScale;\n    let frameH = frameW * self.settings.paperRatio; // w:h scale A3\n    let frameTop = previewBounds.top,\n        htmlMaori = self.el.container.current.querySelectorAll(\".pepehaPortrait-maori\"),\n        htmlEng = self.el.container.current.querySelectorAll(\".pepehaPortrait-eng\"),\n        htmlMaoriFontsize = Number(self.state.textSizes.maori),\n        htmlEngFontsize = Number(self.state.textSizes.eng),\n        svgMaoriFontsize,\n        svgEngFontsize,\n        htmlToSvgHRatio = a3H / frameH,\n        colors = [\n          () => {pepehaPDF.setTextColor(0, 0, 0); pepehaPDF.setFillColor(255, 255, 255)},\n          () => {pepehaPDF.setTextColor(218, 211, 197); pepehaPDF.setFillColor(0, 0, 0)}\n        ];\n\n    svgMaoriFontsize = ((htmlMaoriFontsize * self.scale * htmlToSvgHRatio) / mmToPoint) /  self.defaultScale;\n    svgEngFontsize = ((htmlEngFontsize * self.scale * htmlToSvgHRatio) / mmToPoint) /  self.defaultScale;\n\n    if(self.state.theme === \"white\"){\n      colors[0]();\n    } else {\n      colors[1]();\n    }\n\n    pepehaPDF.setDrawColor(0);\n    pepehaPDF.rect(0, 0, a3W, a3H, 'F');\n\n    self.trackLines = [];\n\n    htmlMaori.forEach(text => {\n      const lines = splitIntoLines(text, frameTop, htmlToSvgHRatio);\n\n      self.trackLines.push(lines);\n\n      lines.forEach(line => {\n        pepehaPDF.setFont(\"PepehaDisplay\", 'normal');\n        pepehaPDF.setFontSize(svgMaoriFontsize);\n\n        const letterSpacing = svgMaoriFontsize * 0.1,\n              extraSpacingFromLetterSpacing = (line.text.replace(/ /g,\"\").length - 3) * letterSpacing;\n\n        pepehaPDF.text(line.text, ((a3W / 2) - (extraSpacingFromLetterSpacing / 2)), line.y, {align: \"center\", charSpace: letterSpacing});\n      })\n    })\n\n    htmlEng.forEach(text => {\n      const lines = splitIntoLines(text, frameTop, htmlToSvgHRatio);\n\n      self.trackLines.push(lines);\n\n      lines.forEach(line => {\n        pepehaPDF.setFont(\"AndSansRegular\", 'normal');\n        pepehaPDF.setFontSize(svgEngFontsize);\n\n        const letterSpacing = svgEngFontsize * 0.19,\n              extraSpacingFromLetterSpacing = (line.text.replace(/ /g,\"\").length - 3) * letterSpacing;\n\n        pepehaPDF.text(line.text, ((a3W / 2) - (extraSpacingFromLetterSpacing / 2)), line.y, {align: \"center\", charSpace: letterSpacing});\n      })\n    })\n\n     const pdfOutput = pepehaPDF.output();\n\n    createJpg(pdfOutput).then(img => {\n      resolve({pdf: pdfOutput, img: img, trackLines: self.trackLines});\n    }).catch(err => reject(err));\n  })\n}\n\nconst splitIntoLines = (text, frameTop, htmlToSvgHRatio) => {\n  const spans = text.querySelectorAll(\"span:not(.nbsp)\");\n\n  let lines = [];\n\n  spans.forEach(span => {\n    let spanBounds = span.getBoundingClientRect(),\n        y = (spanBounds.top + (spanBounds.height * 0.75) - frameTop) * htmlToSvgHRatio,\n        extractedText = span.innerText.toUpperCase();\n\n    if(extractedText !== \"\" && extractedText !== \" \"){\n      if(lines.length < 1 || lines[lines.length - 1].y !== y){ // if first or on new line\n        lines.push({\n          y: y,\n          text: extractedText\n        })\n      } else {\n        lines[lines.length - 1].text += \" \" + extractedText;\n      }\n    }\n  })\n\n  // remove space between dashes\n  lines = lines.map(line => {\n    return {\n      ...line,\n      text: line.text.replace(/( |)-( |)/g, '-') // regex = space or nothing on both ends, with a dash between\n    }\n  });\n\n  return lines;\n}\n\nconst createJpg = pdfOutput => {\n  return new Promise((resolve, reject) => {\n    let loadingTask = pdfjs.getDocument({data: pdfOutput});\n \n    loadingTask.promise.then(pdf => {\n      pdf.getPage(1).then(page => {\n        let scale = 0.9;\n        let viewport = page.getViewport(scale);\n        let canvas = document.createElement(\"canvas\");\n        let context = canvas.getContext('2d');\n\n        canvas.height = viewport.height;\n        canvas.width = viewport.width;\n\n        let renderContext = {\n          canvasContext: context,\n          viewport: viewport\n        };\n\n        let renderTask = page.render(renderContext);\n\n        renderTask.then(() => {\n          let imgSrc = canvas.toDataURL(\"image/jpeg\");\n          resolve(imgSrc);\n\n        }).catch(err => reject(err));\n      });\n    }, err => reject(err));\n  })\n}","import axios from 'axios';\nimport { detect } from 'detect-browser';\n\nexport default function uploadData(userData, portraitData){\n  const postPortrait = portraitData => {\n    return new Promise((resolve, reject) => {\n      axios({\n        method: \"post\",\n        url: 'https://ng51uya03l.execute-api.us-west-2.amazonaws.com/pepeha',\n        timeout: 1000 * 10, // Wait for 10 seconds\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: {\n          pdfString: btoa(portraitData.pdf),\n          jpgString: portraitData.img.split(',')[1]\n        }\n      }).then(response => {\n        if(response.data.dialogAction.fulfillmentState === \"Fulfilled\"){\n          resolve(response);\n        } else {\n          reject(response.data.dialogAction);\n        }\n      }).catch(err => {\n        reject(err);\n      });\n    })\n  }\n\n  const postUserData = (userData, response) => {\n    return new Promise((resolve, reject) => {\n      const splitLocation = response.data.dialogAction.message.content.pdf.split(\"/\");\n      const pdfId = splitLocation[1],\n            pdfName = splitLocation[3].split(\".\")[0];\n\n      document.cookie = `dataAW=${pdfId},${pdfName};path=/`;\n\n      let device = detect();\n\n      let formData = {\n        ...userData,\n        \"jpg\": \"https://s3-ap-southeast-2.amazonaws.com/pepeha-dev/\" + response.data.dialogAction.message.content.jpg,\n        \"pdf\": \"https://s3-ap-southeast-2.amazonaws.com/pepeha-dev/\" + response.data.dialogAction.message.content.pdf,\n        \"browser\": device.name,\n        \"os\": device.os,\n        \"browserVersion\": device.version,\n        \"userAgent\": navigator.userAgent\n      }\n\n      resolve(\"https://s3-ap-southeast-2.amazonaws.com/pepeha-dev/\" + response.data.dialogAction.message.content.pdf);\n\n      // axios({\n      //   method: \"post\",\n      //   url: './cdkckdjcndfk.php',\n      //   timeout: 1000 * 10, // Wait for 10 seconds\n      //   headers: {\n      //     \"content-type\": \"application/x-www-form-urlencoded\",\n      //     'Access-Control-Allow-Origin': '*'\n      //   },\n      //   data: {\n      //     \"formData\": JSON.stringify(formData)\n      //   }\n      // }).then(response => {\n      //   console.log(response);\n      //   if(response === \"New record created successfully\"){\n      //     resolve('success! Save email');\n      //     window.location = \"./download-ready.html\";\n      //   } else {\n      //     reject('email not saved');\n      //   }\n      // }).catch(err => {\n      //   reject(err);\n      // });\n    });\n  }\n\n  return new Promise((resolve, reject) => {\n    postPortrait(portraitData)\n    .then(response => {\n      // console.log('response',response);\n      postUserData({...userData, trackLines: portraitData.trackLines}, response)\n      .then(response => {\n        // console.log('response',response);\n        resolve(response);\n      })\n      .catch(err => {\n        reject(err);\n      })\n    })\n    .catch(err => {\n      reject(err);\n    })\n  })\n}","import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { connect } from \"react-redux\";\nimport { toolbarChanged } from \"../redux/actions\";\n\nimport { TweenLite, Sine } from \"gsap\";\n\nimport Signup from '../components/Signup';\nimport Confirm from '../components/Confirm';\n\nimport createPdf from '../utils/createPdf';\nimport uploadData from '../utils/uploadData';\n\nimport '../styles/_pepehaPortrait.scss';\n\nconst mapStateToProps = state => {\n  return { state: state };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toolbarChanged: payload => dispatch(toolbarChanged(payload))\n  };\n}\n\nconst PepehaTextLine = ({self, visible = true, sentences, entry, simple = false}) => {\n  if(visible === true){\n    let maori, eng;\n\n    if(simple){\n      maori = \"Kia ora ttou\";\n      eng = \"greetings all\";\n    } else {\n      maori = `${sentences.maori[0]} ${entry.maori ? entry.maori : entry.eng} ${sentences.maori[1]}`;\n      eng = `${sentences.eng[0]} ${entry.eng} ${sentences.eng[1]}`;\n    }\n    \n    return(\n      <React.Fragment>\n        <h3 \n          style={{fontSize: self.state.textSizes.maori + \"px\"}}\n          className=\"pepehaPortrait-maori\"\n          dangerouslySetInnerHTML={ {__html: self.splitIntoSpans(maori)} }\n        />\n\n        <p \n          style={{fontSize: self.state.textSizes.eng + \"px\"}}\n          className=\"pepehaPortrait-eng\"\n          dangerouslySetInnerHTML={ {__html: self.splitIntoSpans(eng)} }\n        />\n      </React.Fragment>\n    )\n  } else return null\n}\n\nclass PepehaPortrait extends Component {\n  state = {\n    active: false,\n    pepehaData: {},\n    pepehaStyles: {},\n    textSizes: {\n      eng: null,\n      maori: null\n    },\n    containerScale: 1,\n    theme: \"white\",\n    previewIsClosed: true,\n    showFinBtn: false,\n    ios: false,\n    isSafari: false,\n    confirmActive: false,\n    signUpActive: false,\n    portraitReady: false\n  }\n\n  settings = {\n    paperRatio: 1.41,\n    \n    engEm: 0.73,\n    maoriEm: 2.4,\n\n    maxWRatio: 0.75,\n    maxHRatio: 0.80,\n\n    previewTiming: 0.15,\n  }\n\n  el = {\n    preview: React.createRef(),\n    container: React.createRef(),\n    zoomIcon: React.createRef(),\n    cornerClose: React.createRef(),\n    confirm: React.createRef(),\n  }\n\n  instagramMinFontSize = 8;\n\n  componentDidMount(){\n    this.previewBox= this.el.preview.current.getBoundingClientRect();\n    this.emSize = this.previewBox.width / 100;\n\n    if(this.emSize * this.settings.engEm < this.instagramMinFontSize){\n      let newEmSize = this.instagramMinFontSize / this.settings.engEm,\n          emDiff = newEmSize / this.emSize;\n\n      this.emSize = newEmSize;\n      this.defaultScale = emDiff;\n    }\n\n    // this.el.preview.current.style.fontSize = this.emSize + \"px\";\n    // this.el.preview.current.style.height = this.previewBox.width * this.settings.paperRatio + \"px\";\n    document.querySelector(\".pepehaPortrait-colors\").style.width = this.previewBox.width + \"px\";\n\n    // console.log('this.el.preview.current.style.height',this.el.preview.current.style.height);\n\n    // this.previewBox = this.el.preview.current.getBoundingClientRect();\n\n    // console.log('this.previewBox.height',this.previewBox.height);\n\n    this.setState({\n      pepehaStyles: {\n        ...this.state.pepehaStyles,\n        transform: `scale(${1 / this.defaultScale}) translate(-50%,-50%)`,\n        width: this.previewBox.width * this.defaultScale,\n        maxWidth: this.previewBox.width * this.defaultScale,\n        height: this.previewBox.width * this.settings.paperRatio * this.defaultScale,\n        fontSize: this.emSize + \"px\"\n      },\n      textSizes: {\n        eng: (this.emSize * this.settings.engEm).toFixed(4),\n        maori: (this.emSize * this.settings.maoriEm).toFixed(4),\n      }\n    })\n\n    this.resizeEvent = this.onResize.bind(this);\n    this.orientationEvent = this.onOrientationChange.bind(this);\n\n    window.addEventListener(\"resize\", this.resizeEvent);\n    window.addEventListener(\"orientationChange\", this.resizeEvent);\n    window.addEventListener(\"click\", this.bodyClicked.bind(this));\n\n    this.windowW = window.innerWidth;\n    this.windowH = window.innerHeight;\n\n    if(this.windowW > 1024){\n      this.isDektop();\n    }\n  }\n\n  componentWillUnmount(){\n    window.removeEventListener(\"resize\", this.resizeEvent);\n    window.removeEventListener(\"orientationChange\", this.resizeEvent);\n  }\n\n  onResize(){\n    this.windowW = window.innerWidth;\n    this.windowH = window.innerHeight;\n\n    // this.defaultResizing();\n    this.setSizesForPortraitPreview();\n\n    // setTimeout(() => {\n    //   this.scaleSvgPreview();\n    // }, 1000)\n  }\n\n  onOrientationChange(){\n    // this.defaultResizing();\n  }\n\n  setSizesForPortraitPreview(){\n    let delay = 0;\n\n    if(this.state.previewIsClosed === false){\n      this.zoomIn();\n      delay = 700;\n    } \n\n    setTimeout(() => {\n      this.setState({\n        pepehaStyles: { }\n      })\n  \n      this.previewBox = this.el.preview.current.getBoundingClientRect();\n      this.emSize = this.previewBox.width / 100;\n  \n      if(this.emSize * this.settings.engEm < this.instagramMinFontSize){\n        let newEmSize = this.instagramMinFontSize / this.settings.engEm,\n            emDiff = newEmSize / this.emSize;\n  \n        this.emSize = newEmSize;\n        this.defaultScale = emDiff;\n      }\n  \n      document.querySelector(\".pepehaPortrait-colors\").style.width = this.previewBox.width + \"px\";\n  \n      this.setState({\n        pepehaStyles: {\n          ...this.state.pepehaStyles,\n          transform: `scale(${1 / this.defaultScale}) translate(-50%,-50%)`,\n          width: this.previewBox.width * this.defaultScale,\n          maxWidth: this.previewBox.width * this.defaultScale,\n          height: this.previewBox.width * this.settings.paperRatio * this.defaultScale,\n          fontSize: this.emSize + \"px\"\n        },\n        textSizes: {\n          eng: (this.emSize * this.settings.engEm).toFixed(4),\n          maori: (this.emSize * this.settings.maoriEm).toFixed(4),\n        }\n      })\n    }, delay)\n  }\n\n  defaultResizing(){\n    if(this.emSize * this.settings.engEm < this.instagramMinFontSize){\n      let newEmSize = this.instagramMinFontSize / this.settings.engEm;\n\n      this.emSize = newEmSize;\n    }\n\n    this.previewBox = this.el.preview.current.getBoundingClientRect();\n\n    document.querySelector(\".pepehaPortrait-colors\").style.width = this.previewBox.width + \"px\";\n\n    this.setState({\n      pepehaStyles: {\n        ...this.state.pepehaStyles,\n        height: this.previewBox.width * this.settings.paperRatio / (1 / this.defaultScale),\n        fontSize: this.emSize\n      },\n      textSizes: {\n        eng: (this.emSize * this.settings.engEm).toFixed(4),\n        maori: (this.emSize * this.settings.maoriEm).toFixed(4),\n      }\n    })\n  }\n\n  componentDidUpdate(){\n    this.payload = {...this.state};\n\n    // zoomed in\n    if(this.payload.previewIsClosed === false){\n      // let portraitDimensions = document.querySelector(\".pepehaPortrait-preview\").getBoundingClientRect();\n\n      // document.querySelector(\".pepehaPortrait-preview\").scrollTop = portraitDimensions.height * this.payload.previewClickPos.y;\n\n      // setTimeout(() => {\n      //   window.scrollTo(portraitDimensions.height * this.payload.previewClickPos.y, portraitDimensions.width * this.payload.previewClickPos.x);\n      // }, 500)\n    }\n\n    let changed = false;\n\n    if(this.state.active !== this.props.visible){\n      changed = true;\n      this.payload.active = !this.state.active; \n    }\n\n    if(this.state.pepehaData !== this.props.state.updatePepehaData){\n      changed = true;\n      this.payload.pepehaData = this.props.state.updatePepehaData;\n    }\n\n    if(changed){\n      this.setState(this.payload);\n\n      let dataCount = Object.keys(this.payload.pepehaData).filter(key => this.payload.pepehaData[key].visible === true).length;\n\n      if(this.payload.active === true && dataCount > 0){\n        this.scaleSvgPreview();\n        this.setState({showFinBtn : true});\n      } else {\n        this.setState({showFinBtn : false});\n      }\n    }\n  }\n\n  scaleSvgPreview(){\n    this.el.container.current.style.transform = `scale(${1}) translate(-50%,-50%)`;\n    \n    document.querySelectorAll(\".pepehaPortrait-maori\").forEach(maoriText => {\n      maoriText.style.width = \"auto\";\n    })\n\n    let frameW = Math.round(this.el.preview.current.offsetWidth),\n        initialPepehaW = Math.round(this.el.container.current.offsetWidth),\n        initialPepehaH = Math.round(this.el.container.current.offsetHeight);\n\n    let frameH = Math.round(frameW * this.settings.paperRatio); // w:h scale A3\n\n    this.scale = ((frameW * this.settings.maxWRatio) / initialPepehaW);\n\n    if((frameH * this.settings.maxHRatio) / initialPepehaH < this.scale){\n      this.scale = ((frameH * this.settings.maxHRatio) / initialPepehaH);\n    }\n\n    this.el.container.current.style.transform = `scale(${this.scale}) translate(-50%,-50%)`;\n\n    let maxWidth = this.el.preview.current.offsetWidth;\n\n    if(this.el.container.current.offsetWidth < maxWidth){\n      let fillWidth = maxWidth / this.scale * this.settings.maxWRatio;\n\n      document.querySelector(\".pepehaPortrait-maori\").style.width = fillWidth;\n    } else {\n      document.querySelector(\".pepehaPortrait-maori\").style.width = \"auto\";\n    }\n  }\n\n  splitIntoSpans(string){\n    let words = string.split(\" \").filter(word => word.length > 0),\n        spanString = '';\n    \n    words.forEach((word, i) => {\n      if(i === words.length - 1){\n        if(!this.state.isSafari){\n          spanString += \"<em class='nbsp'>&nbsp;</em>\";\n        } else {\n          spanString += \"<span class='nbsp'>&nbsp;</span>\";\n        }\n      } else if(i !== 0){\n        spanString += ' ';\n      }\n\n      spanString += `<span>${word}</span>`\n    })\n\n    let deDashed = spanString.replace(/-/g, '</span><span>-</span><span>');\n\n    return deDashed;\n  }\n\n  zoomIn(e){\n    if(this.state.previewIsClosed === true){\n      this.preZoomTransform = this.state.pepehaStyles.transform;\n      this.previewBox = this.el.preview.current.getBoundingClientRect();\n\n      let x = e.nativeEvent.offsetX,\n          y = e.nativeEvent.offsetY;\n\n      let scale = 1 / this.defaultScale,\n          scaledDimensions = {width: this.previewBox.width / scale, height: this.previewBox.height / scale},\n          coOrdsPercent = {x: x / scaledDimensions.width, y: y / scaledDimensions.height};\n\n      if(this.windowW < 1025 || this.state.ios){\n        let scaleSize = (this.windowW * 1.5) / scaledDimensions.width;\n\n        this.setState({\n          previewIsClosed: false,\n          previewClickPos: coOrdsPercent,\n          pepehaStyles: {\n            ...this.state.pepehaStyles,\n            transform: `scale(${scaleSize}) translate(0,0)`\n          },\n        })\n      } else {\n        let scaleSize = (this.windowH * 2) / scaledDimensions.height,\n            checkMaxWidth = (this.windowW * 0.75) / scaledDimensions.width;\n\n        if(scaleSize > checkMaxWidth) scaleSize = checkMaxWidth;\n\n        this.setState({\n          previewIsClosed: false,\n          pepehaStyles: {\n            ...this.state.pepehaStyles,\n            transform: `scale(${scaleSize}) translate(-50%,0)`\n          },\n        })\n      }\n    } else {\n      const pepehaPortrait = document.querySelector(\".pepehaPortrait\");\n\n      pepehaPortrait.scrollTop = 0; // for Edge\n      pepehaPortrait.scrollLeft = 0; // for orientation change on iPad pro\n\n      setTimeout(() => {\n        this.setState({\n          previewIsClosed: true,\n          pepehaStyles: {\n            ...this.state.pepehaStyles,\n            transform: this.preZoomTransform\n          },\n        })\n      }, 100)\n    }\n\n    document.querySelector(\".mobileAdjustBox\").classList.toggle(\"-zoomed\");\n  }\n\n  isDektop(){\n    this.zoomIconWidth = this.el.zoomIcon.current.offsetWidth;\n  }\n\n  previewMouseEnter(){\n    this.zoomIconMoving = true;\n\n    TweenLite.to(this.el.zoomIcon.current, this.settings.previewTiming, {opacity: 0, ease: Sine.easeIn, onComplete: () => {\n      this.zoomIconMoving = false;\n      TweenLite.to(this.el.zoomIcon.current, this.settings.previewTiming, {opacity: 1, ease: Sine.easeIn})\n    }})\n\n    this.el.cornerClose.current.classList.add('-hide');\n  }\n\n  previewMouseMove(e){\n    if(this.zoomIconMoving === true) return;\n\n    let x = e.nativeEvent.offsetX,\n        y = e.nativeEvent.offsetY;\n\n    TweenLite.to(this.el.zoomIcon.current, 0, {x: x - (this.zoomIconWidth / 2) + \"px\", y: y - (this.zoomIconWidth / 2) + \"px\"})\n  }\n\n  previewMouseLeave(){\n    TweenLite.to(this.el.zoomIcon.current, this.settings.previewTiming, {opacity: 0, ease: Sine.easeIn, onComplete: () => {\n      this.el.zoomIcon.current.style.transform = '';\n      TweenLite.to(this.el.zoomIcon.current, this.settings.previewTiming, {opacity: 1, ease: Sine.easeIn})\n    }})\n\n    this.el.cornerClose.current.classList.remove('-hide');\n  }\n\n  openFinishedWindow(){\n    this.setState({\n      confirmActive: true\n    })\n  }\n\n  closeFinishedWindow(){\n    this.setState({\n      confirmActive: false\n    })\n  }\n\n  openSignup(){\n    this.props.toolbarChanged({active: false, button: false});\n\n    this.setState({\n      signUpActive: true\n    })\n  }\n\n  closeSignup(){\n    this.props.toolbarChanged({active: true, button: \"back\"});\n\n    this.setState({\n      signUpActive: false\n    })\n  }\n\n  uploadPortraitAndData(userData){\n    this.setState({loading: true});\n\n    createPdf(this).then(portraitData => {\n      uploadData(userData, portraitData)\n      .then(response => {\n        this.setState({loading: false, portraitReady: true});\n        console.log('data uploaded!', response);\n      }).catch(err => {\n        console.log('err',err);\n        this.setState({loading: false});\n      });\n    }).catch(err => {\n      console.log('err',err);\n      this.setState({loading: false});\n    });\n  }\n\n  bodyClicked(e){\n    if(this.state.confirmActive){\n      let targetClass = e.target.classList.value,\n          checkConfirm = targetClass.indexOf(\"confirm\"),\n          checkSignup = targetClass.indexOf(\"signup\"),\n          checkOpenButton = e.target.closest(\".pepehaPortrait-next-button\");\n\n      if(checkConfirm === -1 && checkSignup === -1 && checkOpenButton === null){\n        this.setState({\n          confirmActive: false,\n          signUpActive: false\n        })\n\n        this.props.toolbarChanged({active: true, button: \"back\"});\n      }\n    }\n  }\n\n  render() {\n    if (this.state.portraitReady === true) {\n      return <Redirect to='./portrait-ready' />\n    }\n\n    return (\n      <section className={`pepehaPortrait ${this.state.active ? '-active' : ''}`}>\n        {/* // prev pepehaSvg */}\n        <p className=\"pepehaPortrait-title\">Your Pepeha</p>\n\n        <div className=\"pepehaPortrait-leftBorder\">\n          <svg className=\"pepehaPortrait-leftBorder-triangle\" viewBox=\"0 0 16.6 30\" x=\"0px\" y=\"0px\">\n            <polyline className=\"st0\" points=\"-0.3,30.6 15.4,15 -0.3,-0.6 \"/>\n          </svg>\n        </div>\n\n        <div \n          className={`pepehaPortrait-next ctaButton ${this.state.showFinBtn ? \"-active\" : \"\"}`}\n          onClick={() => this.openFinishedWindow()}\n        >\n          <div className=\"ctaButton-ripple\"></div>\n          <svg className=\"pepehaPortrait-next-button ctaButton-button\" x=\"0px\" y=\"0px\" viewBox=\"0 0 73.6 73.6\">\n            <circle className=\"st0\" cx=\"36.8\" cy=\"36.8\" r=\"36.8\"/>\n            <path d=\"M14.3,34.5H11v1.7h2.7v1.3H11V41H9.6v-7.8h4.7V34.5z\"/>\n            <path d=\"M17.8,41h-1.4v-7.8h1.4V41z\"/>\n            <path d=\"M27,41h-1.1l-4-5.1V41h-1.4v-7.8h1.2l3.9,5.1v-5.1H27V41z\"/>\n            <path d=\"M31.2,41h-1.4v-7.8h1.4V41z\"/>\n            <path d=\"M35.8,41c-1.1,0-2-0.6-2.6-1.5l1.2-0.7c0.3,0.5,0.9,0.8,1.4,0.8c0.7,0,1.2-0.4,1.2-0.8s-0.2-0.8-1.2-1.2l-0.2-0.1\n              c-0.8-0.3-2.1-0.8-2.1-2.3c0.1-1.2,1.1-2.2,2.3-2.1c0.9,0,1.7,0.4,2.2,1.1L36.8,35c-0.2-0.3-0.6-0.5-1-0.5c-0.6,0-0.9,0.3-0.9,0.8\n              s0.2,0.7,1.2,1.1l0.2,0.1c1.2,0.5,2.1,1.1,2.1,2.4C38.3,40.1,37.2,41.1,35.8,41C35.9,41.1,35.8,41.1,35.8,41z\"/>\n            <path d=\"M47.1,41h-1.4v-3.4H42V41h-1.4v-7.8H42v3h3.7v-3h1.4L47.1,41z\"/>\n            <path d=\"M54.6,41h-4.7v-7.8h4.7v1.3h-3.3v1.7H54v1.3h-2.7v2.1h3.3V41z\"/>\n            <path d=\"M59.5,41h-2.5v-7.8h2.8c2.1,0,3.8,1.7,3.9,3.8c0,0,0,0.1,0,0.1c0,2.2-1.8,3.9-3.9,3.9C59.6,41,59.5,41,59.5,41z M59.6,34.6\n              h-1.3v5.1h1c1.4,0.1,2.7-1,2.8-2.5c0,0,0,0,0-0.1c0-1.4-1-2.5-2.4-2.6C59.7,34.6,59.7,34.6,59.6,34.6L59.6,34.6z\"/>\n          </svg>\n        </div>\n        <div \n          className={`pepehaPortrait-preview -theme-${this.state.theme}`} \n          ref={this.el.preview} \n          style={this.state.pepehaStyles}\n          onClick={e => this.zoomIn(e)}\n          onMouseEnter={() => this.previewMouseEnter()}\n          onMouseMove={e => this.previewMouseMove(e)}\n          onMouseLeave={() => this.previewMouseLeave()}\n        >\n          <div className=\"pepehaPortrait-frame\" data-html2canvas-ignore/>\n          <div className=\"pepehaPortrait-container\" ref={this.el.container}>\n            {this.props.state.moveStep.stage === \"simple\" ? (\n              <PepehaTextLine self={this} simple={true}/>\n            ) : null}\n\n            {Object.keys(this.state.pepehaData).map(key => {\n              const item = this.state.pepehaData[key];\n              \n              return(\n                <PepehaTextLine self={this} key={key} visible={item.visible} sentences={item.sentences} entry={item.entry}/>\n              )\n            })}\n          </div>\n          <div className=\"pepehaPortrait-zoom\" ref={this.el.zoomIcon}>\n            <svg className=\"pepehaPortrait-zoom-icon\" viewBox=\"0 0 40.58 40.58\">\n              <circle className=\"cls-1\" cx=\"20.29\" cy=\"20.29\" r=\"19.5\"></circle>\n              <line className=\"cls-1\" x1=\"28.01\" y1=\"12.57\" x2=\"12.57\" y2=\"28.01\"></line>\n              <line className=\"cls-1\" x1=\"12.57\" y1=\"12.57\" x2=\"28.01\" y2=\"28.01\"></line>\n            </svg>\n          </div>\n        </div>\n\n        <svg className=\"pepehaPortrait-zoom-cornerClose\" viewBox=\"0 0 40.58 40.58\" ref={this.el.cornerClose} onClick={() => this.zoomIn()}>\n          <circle className=\"cls-1\" cx=\"20.29\" cy=\"20.29\" r=\"19.5\"></circle>\n          <line className=\"cls-1\" x1=\"28.01\" y1=\"12.57\" x2=\"12.57\" y2=\"28.01\"></line>\n          <line className=\"cls-1\" x1=\"12.57\" y1=\"12.57\" x2=\"28.01\" y2=\"28.01\"></line>\n        </svg>\n\n        <div className=\"pepehaPortrait-colors\">\n          <div className=\"pepehaPortrait-colors-container\">\n            <div className=\"pepehaPortrait-color -white -active\" onClick={() => this.setState({theme: \"white\"})}>\n              <div className=\"pepehaPortrait-color-dot\">M&#x0100;</div>\n            </div>\n            \n            <div className=\"pepehaPortrait-color -black\" onClick={() => this.setState({theme: \"black\"})}>\n              <div className=\"pepehaPortrait-color-dot\">PANGO</div>\n            </div>\n          </div>\n        </div>\n\n        <Confirm open={this.state.confirmActive} close={this.closeFinishedWindow.bind(this)} openSignUp={this.openSignup.bind(this)}/>\n\n        <Signup active={this.state.signUpActive} close={this.closeSignup.bind(this)} done={this.uploadPortraitAndData.bind(this)} loading={this.state.loading}/>\n      </section>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PepehaPortrait);","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\n\nimport { toolbarChanged, toggleEntryVisibility, moveStepTo } from \"../redux/actions\";\n\nimport FloatingTextInput from '../components/FloatingTextInput';\n\nimport '../styles/_selectionMenu.scss';\n\nconst mapStateToProps = state => {\n  return { state: state };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    toolbarChanged: payload => dispatch(toolbarChanged(payload)),\n    toggleEntryVisibility: payload => dispatch(toggleEntryVisibility(payload)),\n    moveStepTo: payload => dispatch(moveStepTo(payload)),\n  };\n}\n\nclass SelectionMenu extends Component {\n  state = {\n    active: false,\n    enterText: false,\n    dataCount: 0,\n    previewing: false\n  }\n\n  componentDidUpdate(){\n    if(this.state.active !== this.props.visible){\n      this.setState({\n        active: !this.state.active \n      })\n\n      if(this.props.visible === true){\n        this.props.toolbarChanged({buttonColor: 'white', burgerColor: 'white', bcgColor: 'transparent'});\n      }\n    }\n\n    const dataCount = Object.keys(this.props.state.updatePepehaData).filter(key => this.props.state.updatePepehaData[key].visible === true).length;\n\n    if(this.props.visible === true && this.state.dataCount !== dataCount){\n      this.setState({dataCount : dataCount});\n    }\n  }\n\n  toggleItem(type, entry){\n    if(entry !== undefined){\n      this.props.toggleEntryVisibility({ name: type });  \n    } else {\n      this.itemClicked(type);\n    }\n  }\n\n  itemClicked(type, maori){\n    this.props.moveStepTo({ addManually: true });\n    this.setState({ enterText: type, enterPlaceholder: maori });\n  }\n\n  previewClicked(){\n    // this.setState({previewing: true});\n    this.props.moveStepTo({ currStep: \"PepehaPortrait\", prevStep: \"SelectionMenu\" });\n  }\n\n  render() {\n    const updatePepehaData = this.props.state.updatePepehaData;\n\n    return (\n      <React.Fragment>\n        <section className={`selectionMenu ${this.state.active && !this.state.previewing ? '-active' : ''}`}>\n          <div className=\"selectionMenu-explanation\">\n            <p className=\"selectionMenu-explanation-text -para1\">Complete the relevant layers to create your own personal&nbsp;Pepeha.</p>\n          </div>\n          <ul className=\"selectionMenu-list\">\n            {Object.keys(updatePepehaData).map(type => {\n              const item = updatePepehaData[type];\n\n              return(\n                <li key={type} className={`selectionMenu-item ${item.visible ? \"-active\" : ''}`}>\n                  <div className=\"selectionMenu-item-toggle\" onClick={() => {this.toggleItem(type, item.entry)}}>\n                    <div className=\"selectionMenu-item-dot\">\n                      <div className=\"selectionMenu-item-radio\"/>\n                    </div>\n                  </div>\n                  <p onClick={() => {this.itemClicked(type, item.maori)}} className=\"selectionMenu-item-text\">{item.maori}</p>\n                </li>\n              )\n            })}\n          </ul>\n          <div className={`selectionMenu-preview ctaButton ${this.state.dataCount > 0 ? \"-active\" : \"\"}`} onClick={() => this.previewClicked()}>\n            <div className=\"ctaButton-ripple\"></div>\n            <svg className=\"ctaButton-button\" x=\"0px\" y=\"0px\" viewBox=\"0 0 73.6 73.6\"><circle className=\"previewSvg\" cx=\"36.8\" cy=\"36.8\" r=\"36.8\"/><g className=\"st1\"><path d=\"M15.1,33.4c0.3,0.1,0.5,0.3,0.8,0.5s0.4,0.5,0.5,0.8c0.1,0.3,0.2,0.6,0.2,0.9s-0.1,0.6-0.2,0.9c-0.1,0.3-0.3,0.6-0.6,0.8\n                c-0.2,0.2-0.5,0.4-0.8,0.5s-0.6,0.2-1,0.2h-1.6V41H11v-7.7h3.1C14.5,33.2,14.8,33.3,15.1,33.4z M14.4,36.7c0.2-0.1,0.3-0.1,0.4-0.2\n                c0.1-0.1,0.2-0.2,0.3-0.4c0.1-0.1,0.1-0.3,0.1-0.4s0-0.3-0.1-0.4s-0.1-0.3-0.2-0.4c-0.1-0.1-0.2-0.2-0.4-0.2\n                c-0.1-0.1-0.3-0.1-0.4-0.1h-1.6v2.2h1.5C14.1,36.8,14.2,36.8,14.4,36.7z\"/><path d=\"M23,41l-1.8-3.2H20V41h-1.4v-7.7h3.2c0.3,0,0.6,0.1,0.9,0.2s0.5,0.3,0.7,0.5c0.2,0.2,0.4,0.4,0.5,0.7\n                c0.1,0.3,0.2,0.6,0.2,0.9s-0.1,0.6-0.2,0.9c-0.1,0.3-0.3,0.5-0.5,0.7c-0.2,0.2-0.5,0.4-0.8,0.5l2,3.4H23z M20,36.5h1.6\n                c0.3,0,0.6-0.1,0.8-0.3c0.2-0.2,0.3-0.4,0.3-0.7c0-0.1,0-0.3-0.1-0.4c-0.1-0.1-0.1-0.2-0.2-0.3c-0.1-0.1-0.2-0.2-0.3-0.2\n                c-0.1-0.1-0.2-0.1-0.4-0.1H20V36.5z\"/></g><g className=\"st1\"><path d=\"M27.8,34.6v1.7h2.7v1.3h-2.7v2.1h3.3V41h-4.7v-7.7h4.7v1.3H27.8z\"/></g><g className=\"st1\"><path d=\"M40,33.2L37,41h-1.1l-3-7.7h1.5l2.1,5.5l2.1-5.5H40z\"/><path d=\"M43.4,41H42v-7.7h1.4V41z\"/></g><g className=\"st1\"><path d=\"M47.5,34.6v1.7h2.7v1.3h-2.7v2.1h3.3V41h-4.7v-7.7h4.7v1.3H47.5z\"/></g><g className=\"st1\"><path d=\"M62.5,33.2L60.3,41h-1.2l-1.6-5.1L56,41h-1.2l-2.3-7.7H54l1.4,5.2l1.5-5.2h1.2l1.5,5.2l1.4-5.2H62.5z\"/></g></svg>\n          </div>\n        </section>\n\n        <FloatingTextInput \n          visible={this.props.state.moveStep.addManually && this.props.state.moveStep.stage !== \"simple\"} \n          category={this.state.enterText} \n          placeholder={this.state.enterPlaceholder}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectionMenu);","import React, { Component } from 'react';\n\nimport '../styles/_pleaseUpdate.scss';\n\nexport default class PleaseUpdate extends Component {\n  render() {\n    return (\n      <div className=\"pleaseUpdate\">\n        <p className=\"pleaseUpdate-weta\">Aue!</p>\n        <p className=\"pleaseUpdate-text\">Your browser is not supported on this site. Please download a modern browser like Chrome, Firefox or Safari.</p>\n        <a href=\"./\" className=\"pleaseUpdate-back\">Back to home</a>\n      </div>\n    );\n  }\n}","import React, { Component } from 'react';\n\nimport TopToolbar from '../components/TopToolbar';\nimport SplashPage from '../components/SplashPage';\nimport SimpleSteps from '../components/SimpleSteps';\nimport PepehaPortrait from '../components/PepehaPortrait';\nimport SelectionMenu from '../components/SelectionMenu';\nimport PleaseUpdate from '../components/PleaseUpdate';\n\nimport { connect } from \"react-redux\";\nimport { resetPepehaData, resetPosition, moveStepTo } from \"../redux/actions\";\n\nconst mapStateToProps = state => {\n  return { state: state };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    resetPepehaData: payload => dispatch(resetPepehaData(payload)),\n    resetPosition: payload => dispatch(resetPosition(payload)),\n    moveStepTo: payload => dispatch(moveStepTo(payload)),\n  };\n}\n\nclass CreatePepeha extends Component {\n  state = {\n    visible: true\n  }\n\n  componentDidMount(){\n    const OS = this.props.state.deviceInfo.os;\n    if(OS === \"iOS\" || OS === \"Android OS\"){\n      console.log('is mobile');\n    }\n\n    if(document.readyState === \"complete\"){\n      this.onLoad();\n    } else {\n      window.addEventListener(\"load\", () => this.onLoad());\n    }\n\n    this.setState({\n      windowW: window.innerWidth\n    })\n\n    this.setVH = () => this.setViewportHeightMobile();\n    this.setVH();\n\n    window.addEventListener(\"resize\", this.setVH);\n    window.addEventListener(\"orientationChange\", this.setVH);\n  }\n\n  setViewportHeightMobile(innerH = window.innerHeight){\n    let vh = innerH * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n\n    const windowW = window.innerWidth;\n    \n    if(windowW > 1024){\n      if(\n        this.state.visible === \"PepehaPortrait\" \n        && \n        this.props.state.moveStep.stage === \"advanced\"\n      ){\n        this.props.moveStepTo({currStep: \"SelectionMenu\"});\n      } \n    }\n    \n    this.setState({\n      windowW: windowW\n    })\n  }\n\n  onLoad(){\n    setTimeout(() => {\n      this.setState({\n        visible: \"SplashPage\"\n      })\n    }, 250)\n  }\n\n  componentDidUpdate(){\n    if(this.props.state.moveStep === undefined) return;\n    const stepChange = this.props.state.moveStep.currStep;\n\n    if(this.state.visible !== stepChange){\n      this.setState({\n        visible: stepChange\n      })\n    }\n  }\n\n  componentWillUnmount(){\n    this.props.resetPepehaData();\n    this.props.resetPosition();\n    window.removeEventListener(\"resize\", this.setVH);\n    window.removeEventListener(\"orientationChange\", this.setVH);\n  }\n  \n  render() {\n    return (\n      <React.Fragment>\n        <main className={ \"-\" + this.props.state.moveStep.stage }>\n          <div>\n            <TopToolbar/>\n\n            <div className=\"mobileAdjustBox\">\n              <SplashPage visible={this.state.visible === \"SplashPage\" ? true : false}/>\n\n              {this.state.visible === \"SimpleSteps\" ? (\n                <SimpleSteps visible={true}/>\n              ) : (\n                null\n              )}\n              \n              <PepehaPortrait visible={\n                (this.state.visible === \"PepehaPortrait\" || (this.state.windowW > 1024 && this.state.visible === \"SelectionMenu\")) ? true : false}\n              />\n            </div>\n\n            <SelectionMenu visible={this.state.visible === \"SelectionMenu\" ? true : false}/>\n          </div>\n        </main>\n\n        <PleaseUpdate/>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreatePepeha);","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 73;"],"sourceRoot":""}